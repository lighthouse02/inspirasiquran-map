<!DOCTYPE html>
<html>
<head>
    
    <meta http-equiv="content-type" content="text/html; charset=UTF-8" />

  <link rel="icon" type="image/png" href="/quran-map/assets/icon%20quran.png" />
  <link rel="apple-touch-icon" href="/quran-map/assets/icon%20quran.png" />
    
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/leaflet-control-search@2.9.8/dist/leaflet-search.min.css" />
<script src="https://cdn.jsdelivr.net/npm/leaflet-control-search@2.9.8/dist/leaflet-search.min.js"></script>
    
        <script>
            L_NO_TOUCH = false;
            L_DISABLE_3D = false;
        </script>
    
    <style>html, body {width: 100%;height: 100%;margin: 0;padding: 0;}</style>
    <style>#map {position:absolute;top:0;bottom:0;right:0;left:0;}</style>
    <script src="https://cdn.jsdelivr.net/npm/leaflet@1.9.3/dist/leaflet.js"></script>
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Leaflet.awesome-markers/2.0.2/leaflet.awesome-markers.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/leaflet@1.9.3/dist/leaflet.css"/>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css"/>
    <link rel="stylesheet" href="https://netdna.bootstrapcdn.com/bootstrap/3.0.0/css/bootstrap-glyphicons.css"/>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.2.0/css/all.min.css"/>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Leaflet.awesome-markers/2.0.2/leaflet.awesome-markers.css"/>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/python-visualization/folium/folium/templates/leaflet.awesome.rotate.min.css"/>
    <!-- Improved readable UI font -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700;800&display=swap" rel="stylesheet">
    
            <meta name="viewport" content="width=device-width,
                initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
            <style>
                #map_650a101fa46c8081aa4ee9eed624a32a {
                    position: relative;
                    width: 100.0%;
                    height: 65.0vh;
                    left: 0.0%;
                    top: 0.0%;
                }
              /* Use Inter for improved legibility and avoid hollow/outlined rendering */
              body, html, .folium-map, .leaflet-container { font-family: Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif; font-size: 16px; }
              .leaflet-container { font-size: 1rem; }
            </style>
        
    <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet.markercluster/1.1.0/leaflet.markercluster.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet.markercluster/1.1.0/MarkerCluster.css"/>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet.markercluster/1.1.0/MarkerCluster.Default.css"/>
</head>
<body>
    
    
<style>
.leaflet-tile-pane {
  filter: grayscale(100%) sepia(40%) hue-rotate(330deg) saturate(70%) brightness(90%);
}
.leaflet-control, .leaflet-control * { filter: none !important; }

/* Make Leaflet attribution very small */
.leaflet-control-attribution{
  font-size: 5px !important;
  line-height: 1.05 !important;
  padding: 0px 2px !important;
  opacity: 0.75;
}
.leaflet-control-attribution a{ font-size: 5px !important; }
.leaflet-control-attribution svg{ width: 6px !important; height: auto !important; vertical-align: -1px; }
</style>
    
<div id="siteHeader" style="position: fixed; top: 0; left: 0; right: 0; z-index: 9999;
            background:#111315; color:#f4f2ee;
            border-bottom: 1px solid rgba(190,170,141,.35);
            font-family: system-ui, Arial; padding: 10px 16px;">
  <div style="max-width:1200px;margin:0 auto;display:flex;align-items:center;gap:14px;flex-wrap:wrap;">
      <div style="display:flex;align-items:center;gap:10px;font-weight:800;font-size:18px;letter-spacing:.5px;">
      <img src='quran-map/assets/icon quran.png' alt="Quran" style="width:24px;height:24px;object-fit:contain;border-radius:6px;border:1px solid rgba(190,170,141,.45);background:#BEAA8D;" />
      <span>DUNIA MEMBACA AL-QURAN</span>
      <span id="siteLastUpdated" style="opacity:.6;font-weight:400;font-size:12px;margin-left:10px;">Last updated: auto</span>
    </div>
    <div style="flex:1"></div>
    <div style="display:flex;gap:22px;">
      <div><div style="opacity:.6;font-size:11px;">Total Qur'an</div>
           <div style="font-size:18px;font-weight:700;">31,230</div></div>
      <div><div style="opacity:.6;font-size:11px;">Projects</div>
           <div style="font-size:18px;font-weight:700;">10</div></div>
      <div><div style="opacity:.6;font-size:11px;">Countries</div>
           <div style="font-size:18px;font-weight:700;">8</div></div>
    </div>
  </div>
</div>
<div id="headerSpacer" style="height:56px;"></div>
    
<style>
  .marker-cluster div {
    background:#BEAA8D !important;
    color:#111 !important;
    border:2px solid #9f8c70 !important;
    box-shadow:0 0 0 2px rgba(0,0,0,.15) inset;
  }
  .marker-cluster {
    background:rgba(190,170,141,.35) !important;
  }
  .marker-cluster:hover div {
    filter:brightness(1.05);
  }
  .marker-cluster-small div,
  .marker-cluster-medium div,
  .marker-cluster-large div {
    background:#BEAA8D !important;
    border-color:#9f8c70 !important;
  }
</style>
    
<style>
  :root { --header-h: 0px; } /* fallback */
  /* make page + map background always dark */
  html, body { background:#0f1114; }
  .folium-map, .leaflet-container { background:#0f1114 !important; }
</style>
<script>
  (function(){
    function setHeaderHeight(){
      var h = document.getElementById('siteHeader');
      var s = document.getElementById('headerSpacer');
      if(!h || !s) return;
      var hh = h.getBoundingClientRect().height;
      document.documentElement.style.setProperty('--header-h', hh + 'px');
      s.style.height = hh + 'px';
    }
    window.addEventListener('load', setHeaderHeight);
    window.addEventListener('resize', setHeaderHeight);
  })();
</script>
    <style>
      /* Page timeline - create a visible track and place incidents inside it */
      .page-timeline-track{ position:absolute; left:0; right:0; top:50%; transform:translateY(-50%); height:14px; background:#121316; border-radius:6px; border:2px solid rgba(255,255,255,0.04); box-shadow: inset 0 0 0 4px rgba(17,19,21,0.6); z-index:1 }
      .page-timeline-dots{ position:relative; height:0; }
      .page-timeline-counts{ position:relative; height:0; }
      .page-timeline-count{ position:absolute; top:-30px; transform:translateX(-50%); background:#ff6b6b;color:#111;font-weight:800;border-radius:999px;padding:4px 6px;font-size:12px; box-shadow:0 6px 14px rgba(0,0,0,.45); pointer-events:auto; z-index:5 }
      /* incident buttons placed inside the track (centered vertically) */
      .page-timeline-dot{ position:absolute; top:50%; transform:translate(-50%,-50%); width:12px; height:12px; border-radius:50%; background:#ff6b6b; border:0; transition:all .12s ease; cursor:pointer; box-shadow:0 6px 14px rgba(0,0,0,.25); z-index:6 }
      .page-timeline-dot.active{ background:#ff6b6b; box-shadow:0 0 8px rgba(255,107,107,0.45); width:12px; height:12px; }
      .page-timeline-hoverlabel{ position:absolute; top:-44px; transform:translateX(-50%); font-family:monospace; font-size:12px; padding:6px 8px; border-radius:6px; background:#111; color:#fff; box-shadow:0 8px 24px rgba(0,0,0,.5); pointer-events:none; white-space:nowrap; }
      .page-timeline-handle{ position:absolute; top:50%; transform:translate(-50%,-50%); width:18px; height:18px; border-radius:50%; background:#fff; border:3px solid #ff6b6b; box-shadow:0 6px 18px rgba(0,0,0,.45); z-index:8; cursor:grab; }
      .page-timeline-handle:active{ cursor:grabbing }
      #pageMapTimeline{ margin-bottom:6px }

      /* Activity feed styles (match table width/appearance) */
      .activity-wrap { margin-top:14px; }
      .activity-table-wrap { background:#171a1f; border-radius:12px; padding:6px; box-shadow: 0 6px 22px rgba(0,0,0,.35); }
      .activity-feed { list-style:none; margin:0; padding:0; width:100%; }
      .activity-item { padding:14px; border-radius:12px; display:flex; align-items:center; justify-content:space-between; gap:12px; background:linear-gradient(135deg, rgba(30,34,38,0.6), rgba(22,24,27,0.6)); border:1px solid rgba(190,170,141,0.06); transition: background .12s ease, transform .08s ease; }
      .activity-item + .activity-item { margin-top:8px; }
      .activity-item:hover { background: rgba(190,170,141,.03); transform: translateY(-1px); }
      .activity-avatar { width:52px; height:52px; border-radius:12px; display:flex; align-items:center; justify-content:center; font-size:22px; background:linear-gradient(135deg,#3b82f6,#7c3aed); color:white; box-shadow: 0 8px 20px rgba(0,0,0,.45); margin-right:12px }
      .activity-left { display:flex; flex-direction:column; gap:6px; flex:1; min-width:0 }
      .activity-main { color:#f4f2ee; font-weight:700; font-size:15px; }
      .activity-title { position:relative; cursor:default; }
      /* Floating tooltip (attached to body) to avoid clipping behind panel */
      .activity-floating-tooltip{
        position:absolute; left:0; top:0; transform:translateY(6px);
        background:rgba(27,30,34,.98); color:#f4f2ee; padding:8px 10px; border-radius:8px; font-size:13px; box-shadow:0 8px 20px rgba(0,0,0,.5); opacity:0; pointer-events:none; transition:opacity .12s ease, transform .12s ease; z-index:2147483647;
        white-space:nowrap;
      }
      .activity-sub, .activity-sub .activity-date, .activity-sub .activity-count { color:#cfc6b8; font-size:13px; }
      .activity-right { min-width:120px; display:flex; justify-content:flex-end; }
      .activity-location { display:inline-flex; align-items:center; gap:8px; color:#f4f2ee; font-weight:600; }
      .location-dot { width:12px; height:12px; border-radius:50%; background:#ff4d4d; box-shadow:0 0 10px rgba(255,77,77,0.45); animation: feed-blink 1.2s linear infinite; }
      @keyframes feed-blink { 0% { opacity:1; transform:scale(1);} 50% { opacity:.25; transform:scale(.9);} 100% { opacity:1; transform:scale(1);} }
      /* compact mobile layout */
      @media (max-width:720px){ .activity-item { flex-direction:column; align-items:flex-start; } .activity-right{ width:100%; justify-content:flex-start; margin-top:6px } }
      /* Sumud-like card feed styles */
      .activity-cards{ display:flex; flex-direction:column; gap:12px; }
      .activity-card{ display:flex; gap:12px; align-items:flex-start; background:linear-gradient(180deg, rgba(25,27,30,0.6), rgba(18,20,23,0.6)); border:1px solid rgba(190,170,141,0.06); padding:12px; border-radius:12px; box-shadow:0 8px 22px rgba(0,0,0,.45); }
      /* replace large thumbnail with a compact red dot */
      .activity-card .thumb{ width:28px; height:28px; border-radius:50%; background:transparent; display:flex; align-items:center; justify-content:center; color:#fff; font-size:0; flex-shrink:0 }
      .activity-dot{ width:12px; height:12px; border-radius:50%; background:#ff6b6b; box-shadow:0 0 10px rgba(255,107,107,0.35); display:inline-block }
      .activity-card .body{ flex:1; min-width:0 }
      .activity-card .meta{ display:flex; gap:12px; align-items:center; color:#cfc6b8; font-size:13px; margin-bottom:6px }
      .activity-card .title{ color:#f4f2ee; font-weight:800; font-size:15px; margin-bottom:6px }
      .activity-card .desc{ color:#d7d0c0; font-size:13px; opacity:.95 }
      .activity-card .cta{ margin-left:12px; display:flex; flex-direction:column; gap:8px }
      .activity-count{ font-weight:800; color:#111315; background:#BEAA8D; padding:8px 10px; border-radius:999px; box-shadow:0 8px 18px rgba(0,0,0,.35) }
    </style>

    <script>
      // helper: human-friendly relative time (verbose, pluralized)
      function timeAgo(d){
        if(!d) return 'just now';
        var then = new Date(d);
        if(isNaN(then.getTime())) return 'just now';
        var now = new Date();
        var diff = Math.floor((now - then) / 1000); // seconds
        if(diff < 5) return 'just now';
        if(diff < 60) return diff + (diff === 1 ? ' second ago' : ' seconds ago');
        var m = Math.floor(diff / 60);
        if(m < 60) return m + (m === 1 ? ' minute ago' : ' minutes ago');
        var h = Math.floor(m / 60);
        if(h < 24) return h + (h === 1 ? ' hour ago' : ' hours ago');
        var days = Math.floor(h / 24);
        if(days < 7) return days + (days === 1 ? ' day ago' : ' days ago');
        if(days < 31){
          var weeks = Math.floor(days / 7);
          if(weeks < 1) return days + (days === 1 ? ' day ago' : ' days ago');
          return weeks + (weeks === 1 ? ' week ago' : ' weeks ago');
        }
        // older: show localized date/time
        return then.toLocaleDateString() + ' ' + then.toLocaleTimeString();
      }
      // Helper: add an activity entry to the feed. Example usage:
      // addActivity('Prep: Quran printing & logistics', '13 December 2025', '8,000 Mushaf', 'Isparta, Turkiye', 'ðŸ­');
      function addActivity(title, dateStr, count, location, avatar){
        var ul = document.getElementById('activityFeed');
        if(!ul) return;
        var li = document.createElement('li'); li.className = 'activity-item';
        var av = avatar ? avatar : 'ðŸ“–';
        li.innerHTML = `<div style="display:flex;align-items:center;min-width:0"><div class=\"activity-avatar\">${av}</div><div class=\"activity-left\"><div class=\"activity-main\"><span class=\"activity-title\" data-tooltip=\"${location} Â· ${count}\">${title}</span></div><div class=\"activity-sub\"><span class=\"activity-date\">${dateStr}</span></div></div></div>` +
                       `<div class=\"activity-right\"><div class=\"activity-location\"><span class=\"location-dot\" title=\"${location}\"></span> ${location}</div></div>`;
        // insert at top
        ul.insertBefore(li, ul.firstChild);
      }

      // Example: keep initial static item (already in HTML). You can call addActivity() to add more.
    </script>
    <script>
    // Activities loader: fetch activities.json, render feed and markers, and wire timeline filtering
      (function(){
        // switched to Netlify function backend (Neon DB) â€” deploy function and set DATABASE_URL in Netlify env
        const ACTIVITIES_URL = '/.netlify/functions/get-activities';
      let feedUL = document.getElementById('activityFeed');
      // We'll create an in-map control for the feed/timeline; keep the external feed as fallback
      const activityWrap = document.querySelector('.activity-wrap');
      let timelineRange = null;
      let timelineLabel = null;
      let mapControlCreated = false;

      const markersById = {};

      function toTs(d){ return (d instanceof Date) ? d.getTime() : (isNaN(Date.parse(d)) ? null : Date.parse(d)); }

      async function load(){
        try{
          console.log('Activities: fetching', ACTIVITIES_URL);
          const r = await fetch(ACTIVITIES_URL, {cache:'no-cache'});
          if(!r.ok){ console.warn('Activities: fetch returned', r.status); return []; }
          const data = await r.json();
          console.log('Activities: fetched', Array.isArray(data) ? data.length : Object.keys(data).length);
          return Array.isArray(data) ? data : Object.values(data);
        }catch(e){ console.warn('load activities failed', e); return []; }
      }

      function whenMapReady(cb){
        var tries = 0;
        (function tick(){
          var m = window['map_650a101fa46c8081aa4ee9eed624a32a'];
          if(m && typeof m.addControl === 'function'){ cb(m); return; }
          if(tries++ < 400) return setTimeout(tick, 25);
          console.warn('Timeline: map did not become ready');
        })();
      }

      whenMapReady(function(map){
        // Create an in-map activity control (timeline + feed)
        if(!mapControlCreated){
          var MapActivityControl = L.Control.extend({
            options: { position: 'topright' },
            onAdd: function(){
              var container = L.DomUtil.create('div', 'map-activity-control');
              container.style.maxWidth = '380px';
              container.style.background = 'rgba(17,19,21,0.9)';
              container.style.border = '1px solid rgba(190,170,141,.12)';
              container.style.padding = '12px';
              container.style.borderRadius = '12px';
              container.style.boxShadow = '0 12px 34px rgba(0,0,0,.45)';
              container.innerHTML = `
                    <div class="mac-header" style="display:flex;align-items:center;justify-content:space-between;gap:8px;">
                      <div style="font-weight:800;color:#f4f2ee;font-size:15px">Activity Feed</div>
                      <button class="map-activity-toggle" aria-expanded="true" title="Collapse" style="background:transparent;border:1px solid rgba(255,255,255,0.06);color:#f4f2ee;border-radius:6px;width:28px;height:28px;display:inline-flex;align-items:center;justify-content:center;font-weight:700;z-index:1300;pointer-events:auto">â–¼</button>
                    </div>
                    <div class="mac-content">
                      <div style="margin-bottom:8px"><label style="color:#cfc6b8;font-size:13px;display:block;margin-bottom:6px">Timeline: <span id="mapTimelineLabel">All</span></label><input id="mapTimelineRange" type="range" style="width:100%"/></div>
                      <div id="mapActivityFeed" class="activity-cards" style="max-height:48vh;overflow:auto;padding-right:6px"></div>
                    </div>
                  `;
              // restore previous collapsed state if present
              try{
                var collapsed = localStorage.getItem('mapActivityCollapsed') === 'true';
                if(collapsed){
                  container.querySelector('.map-activity-toggle').setAttribute('aria-expanded','false');
                  container.querySelector('.map-activity-toggle').textContent = 'â–¶';
                  // keep rectangular shape but collapse content (short height)
                  container.style.maxWidth = '380px';
                  container.style.width = '280px';
                  container.style.height = '52px';
                  container.style.padding = '8px 12px';
                  container.style.overflow = 'hidden';
                  var mc = container.querySelector('.mac-content'); if(mc) mc.style.display = 'none';
                }
              }catch(e){ /* ignore storage errors */ }
              L.DomEvent.disableClickPropagation(container);
              L.DomEvent.disableScrollPropagation(container);
              // wire collapse/expand toggle
              try{
                var toggle = container.querySelector('.map-activity-toggle');
                var content = container.querySelector('.mac-content');
                toggle && toggle.addEventListener('click', function(ev){
                  ev.stopPropagation();
                  var expanded = toggle.getAttribute('aria-expanded') === 'true';
                  if(expanded){
                    toggle.setAttribute('aria-expanded','false');
                    toggle.textContent = 'â–¶';
                    if(content) content.style.display = 'none';
                    // keep rectangular collapsed container
                    container.style.maxWidth = '380px';
                    container.style.width = '280px';
                    container.style.height = '52px';
                    container.style.padding = '8px 12px';
                    container.style.overflow = 'hidden';
                    try{ localStorage.setItem('mapActivityCollapsed','true'); }catch(e){}
                  } else {
                    toggle.setAttribute('aria-expanded','true');
                    toggle.textContent = 'â–¼';
                    if(content) content.style.display = 'block';
                    container.style.maxWidth = '380px';
                    container.style.width = '';
                    container.style.height = '';
                    container.style.padding = '12px';
                    container.style.overflow = '';
                    try{ localStorage.setItem('mapActivityCollapsed','false'); }catch(e){}
                  }
                });
                // allow clicking the small collapsed container area to re-open it
                try{
                  container.addEventListener('click', function(ev){
                    // if currently collapsed and click is not on inner content, open
                    if(toggle && toggle.getAttribute('aria-expanded') === 'false'){
                      // ignore clicks that originate from map itself or from map controls nearby
                      if(ev.target && ev.target.closest && ev.target.closest('.mac-content')) return;
                      // trigger toggle open
                      try{ toggle.click(); }catch(e){
                        // fallback: directly expand
                        toggle.setAttribute('aria-expanded','true'); toggle.textContent = 'âˆ’'; if(content) content.style.display = 'block'; container.style.maxWidth = '380px'; try{ localStorage.setItem('mapActivityCollapsed','false'); }catch(_){}
                      }
                    }
                  });
                }catch(e){ /* noop */ }
              }catch(e){ console.warn('Activity control toggle setup failed', e); }
              return container;
            }
          });
          map.addControl(new MapActivityControl());
          // keep a reference for responsive reflow (move control out of map into document flow on mobile)
          (function(){
            var moved = false;
            var ctrl = null;
            var origParent = null;
            var origNext = null;
            function ensureRefs(){ if(ctrl) return; ctrl = document.querySelector('.map-activity-control'); if(!ctrl) return; origParent = ctrl.parentElement; origNext = ctrl.nextSibling; }
            function toMobileFlow(){ ensureRefs(); if(!ctrl || moved) return; // insert before map element so it sits above the map in the page flow
              var mapEl = document.getElementById('map_650a101fa46c8081aa4ee9eed624a32a'); if(!mapEl) return; try{ origParent.removeChild(ctrl); mapEl.parentElement.insertBefore(ctrl, mapEl); ctrl.classList.add('mobile-flow'); moved = true; // slightly reduce map height
                try{ mapEl.style.height = '54vh'; }catch(e){}
              }catch(e){}
            }
            function toDesktopFlow(){ ensureRefs(); if(!ctrl || !moved) return; var mapEl = document.getElementById('map_650a101fa46c8081aa4ee9eed624a32a'); if(!mapEl) return; try{ // restore to original parent at original position
                if(origNext) origParent.insertBefore(ctrl, origNext); else origParent.appendChild(ctrl);
                ctrl.classList.remove('mobile-flow'); moved = false; try{ mapEl.style.height = '65vh'; }catch(e){}
              }catch(e){}
            }
            function check(){ if(window.innerWidth <= 720) toMobileFlow(); else toDesktopFlow(); }
            window.addEventListener('resize', check); setTimeout(check, 250); // run shortly after init
          })();
          // Prefer page-level timeline if present (placed right after the map)
          var pageRange = document.getElementById('pageMapTimelineRange');
          if(pageRange){
            timelineRange = pageRange;
            // hide duplicate in-map range input if present
            var inMap = document.getElementById('mapTimelineRange'); if(inMap) inMap.style.display = 'none';
            // prefer page label too
            timelineLabel = document.getElementById('pageMapTimelineLabel') || document.getElementById('mapTimelineLabel');
          } else {
            timelineRange = document.getElementById('mapTimelineRange');
            timelineLabel = document.getElementById('mapTimelineLabel');
          }
          // use map activity feed container as primary feed target
          var mapFeed = document.getElementById('mapActivityFeed');
          if(mapFeed) feedUL = mapFeed;
          // hide external feed to avoid duplicate UI
          if(activityWrap && activityWrap.style) activityWrap.style.display = 'none';
          mapControlCreated = true;
        }

        // movement track lines
        var movementFullLine = L.polyline([], { color: '#ff6b6b', weight: 0.5, opacity: 0.95, pane: 'overlayPane' }).addTo(map);
        var movementProgressLine = L.polyline([], { color: '#ff6b6b', weight: 0.5, opacity: 0.95, pane: 'overlayPane' }).addTo(map);
        const markerLayer = L.layerGroup().addTo(map);
        var lastItems = [];

        function clearFeedAndMarkers(){
          feedUL.innerHTML = '';
          markerLayer.clearLayers();
          for(const k in markersById) delete markersById[k];
        }

        function render(items){
          clearFeedAndMarkers();
        // normalize and sort ascending by date
        items = items.map(it=>({
          id: it.id || ('a-'+Math.random().toString(36).slice(2)),
          title: it.title || it.note || 'Activity',
          date: (it.date ? new Date(it.date) : (it.created_at ? new Date(it.created_at) : new Date())),
          count: it.count || it.mushaf || null,
          location: it.location || '',
          lat: (typeof it.lat==='number')?it.lat:(it.latitude||null),
          lng: (typeof it.lng==='number')?it.lng:(it.longitude||null),
          attachment: it.attachment || null,
          note: it.note || ''
        })).sort((a,b)=> a.date - b.date);

        // update page header last-updated using newest activity timestamp
        try{
          if(items && items.length){
            var latest = items.reduce((max,it)=> Math.max(max, it.date.getTime()), 0);
            var el = document.getElementById('siteLastUpdated');
            if(el) el.textContent = 'Last updated: ' + timeAgo(new Date(latest));
          }
        }catch(e){ }

        if(items.length){
          const times = items.map(i=>i.date.getTime());
          const minT = Math.min(...times), maxT = Math.max(...times);
          timelineRange.min = minT; timelineRange.max = maxT; timelineRange.value = maxT; timelineLabel.textContent = new Date(parseInt(timelineRange.value)).toLocaleString();
          // render page-level timeline dots if present
          try{
            var dotsRoot = document.getElementById('pageMapTimelineDots');
            var countsRoot = document.getElementById('pageMapTimelineCounts');
            if(dotsRoot){
              dotsRoot.innerHTML = '';
              if(countsRoot) countsRoot.innerHTML = '';
              var range = (maxT - minT) || 1;
              // We'll bucket by percent rounded to two decimals so identical timestamps stack
              var countsMap = {}; // key => {count, pct, ts}
              var _hoverTimeout = null;
              // Create or return a global hover label element attached to document.body
              function ensureHoverLabel(){
                var lbl = document.getElementById('pageMapTimelineHoverLabel');
                if(!lbl){
                  lbl = document.createElement('div');
                  lbl.id = 'pageMapTimelineHoverLabel';
                  lbl.className = 'page-timeline-hoverlabel';
                  // make it float above everything
                  lbl.style.position = 'absolute';
                  lbl.style.zIndex = 999999;
                  lbl.style.display = 'none';
                  lbl.style.pointerEvents = 'none';
                  document.body.appendChild(lbl);
                }
                return lbl;
              }

              // Position the hover label in page coordinates. By default place above the track;
              // if that would overlap the map area, place it below the track.
              function positionHoverLabel(lbl, pct){
                try{
                  if(!lbl || !dotsRoot) return;
                  var wrapper = dotsRoot.parentElement || dotsRoot;
                  var track = wrapper.querySelector('#pageMapTimelineTrack') || wrapper;
                  var trackRect = track.getBoundingClientRect();
                  // clamp pct to avoid touching edges
                  pct = Math.max(2, Math.min(98, pct));
                  var x = trackRect.left + (pct/100) * trackRect.width;

                  // temporarily display to measure height
                  lbl.style.display = 'block';
                  lbl.style.transform = 'translateX(-50%)';
                  var lblRect = lbl.getBoundingClientRect();

                  // determine placement relative to map
                  var mapEl = document.getElementById('map_650a101fa46c8081aa4ee9eed624a32a');
                  var placeBelow = false;
                  if(mapEl){
                    var mapRect = mapEl.getBoundingClientRect();
                    // if placing above would put the label inside the map area, or the wrapper overlaps map,
                    // choose to place below
                    if((trackRect.top - lblRect.height - 8) < mapRect.top || wrapper.getBoundingClientRect().bottom > mapRect.top + 4){
                      placeBelow = true;
                    }
                  }

                  var top;
                  if(placeBelow){
                    top = trackRect.bottom + 8; // below track
                  } else {
                    top = trackRect.top - lblRect.height - 8; // above track
                  }

                  // clamp within viewport vertically
                  var vw = Math.max(document.documentElement.clientWidth || 0, window.innerWidth || 0);
                  var vh = Math.max(document.documentElement.clientHeight || 0, window.innerHeight || 0);
                  top = Math.max(4, Math.min(top, vh - lblRect.height - 4));

                  // set absolute coordinates
                  lbl.style.left = x + 'px';
                  lbl.style.top = top + 'px';
                }catch(e){ /* ignore */ }
              }

              function showHoverLabel(ts, pct){
                try{
                  var lbl = ensureHoverLabel(); if(!lbl) return;
                  lbl.textContent = new Date(parseInt(ts)).toLocaleString();
                  positionHoverLabel(lbl, pct);
                  if(_hoverTimeout) { clearTimeout(_hoverTimeout); _hoverTimeout = null; }
                }catch(e){}
              }

              function hideHoverLabel(){
                try{ var lbl = ensureHoverLabel(); if(!lbl) return; _hoverTimeout = setTimeout(function(){ lbl.style.display = 'none'; }, 250); }catch(e){}
              }
              items.forEach(function(it){
                var ts = it.date.getTime();
                var pct = ((ts - minT) / range) * 100;
                var key = pct.toFixed(2);
                if(!countsMap[key]) countsMap[key] = { count: 0, pct: pct, ts: ts };
                countsMap[key].count += 1;
                // create the incident button for each activity (positioned above the range)
                var btn = document.createElement('button');
                btn.className = 'page-timeline-dot';
                btn.setAttribute('data-ts', ts);
                btn.setAttribute('title', it.title + ' â€” ' + new Date(ts).toLocaleString());
                btn.style.left = pct + '%';
                // make sure buttons receive pointer events even if wrapper is non-interactive
                btn.style.pointerEvents = 'auto';
                // click to jump timeline
                btn.addEventListener('click', function(e){
                  e.stopPropagation();
                  try{ timelineRange.value = ts; applyFilter(); showHoverLabel(ts, pct); }catch(_){ }
                });
                // hover shows a small date label above the button
                btn.addEventListener('mouseenter', function(){ showHoverLabel(ts, pct); });
                btn.addEventListener('mouseleave', function(){ hideHoverLabel(); });
                dotsRoot.appendChild(btn);
              });
              // render stacked count badges for buckets where count > 1
              try{
                Object.keys(countsMap).forEach(function(k){
                  var info = countsMap[k];
                  if(info.count > 1 && countsRoot){
                    var badge = document.createElement('span');
                    badge.className = 'page-timeline-count';
                    badge.textContent = info.count;
                    // allow pointer events on badges (so clicking a badge jumps to the latest ts in bucket)
                    badge.style.pointerEvents = 'auto';
                    badge.style.left = info.pct + '%';
                    badge.setAttribute('data-count', info.count);
                    badge.setAttribute('title',''+info.count+' activities');
                    // clicking a badge will set the timeline to the bucket timestamp and apply filter
                    badge.addEventListener('click', function(e){ e.stopPropagation(); timelineRange.value = info.ts; applyFilter(); });
                    countsRoot.appendChild(badge);
                  }
                });
              }catch(e){ console.warn('Render timeline counts failed', e); }

              // --- create & sync a visible tracker handle (circle) on the track ---
              try{
                // expose timeline range extents for the drag math
                window.__timeline_minT = minT;
                window.__timeline_rangeMs = range;
                function ensureHandle(){
                  var wrapper = dotsRoot.parentElement || dotsRoot;
                  var h = wrapper.querySelector('#pageMapTimelineHandle');
                  if(!h){
                    h = document.createElement('div');
                    h.id = 'pageMapTimelineHandle';
                    h.className = 'page-timeline-handle';
                    h.style.left = '0%';
                    h.style.pointerEvents = 'auto';
                    wrapper.appendChild(h);

                    // dragging support
                    var dragging = false;
                    function onMove(e){
                      var clientX = (e.touches && e.touches[0]) ? e.touches[0].clientX : e.clientX;
                      var track = document.getElementById('pageMapTimelineTrack'); if(!track) return;
                      var rect = track.getBoundingClientRect();
                      var pct = (clientX - rect.left) / rect.width; pct = Math.max(0, Math.min(1, pct));
                      var ts = Math.round(window.__timeline_minT + pct * window.__timeline_rangeMs);
                      try{ timelineRange.value = ts; timelineRange.dispatchEvent(new Event('input',{bubbles:true})); }catch(_){ }
                    }
                    function onUp(){ dragging = false; document.removeEventListener('mousemove', onMove); document.removeEventListener('mouseup', onUp); document.removeEventListener('touchmove', onMove); document.removeEventListener('touchend', onUp); }
                    h.addEventListener('mousedown', function(e){ e.preventDefault(); document.addEventListener('mousemove', onMove); document.addEventListener('mouseup', onUp); });
                    h.addEventListener('touchstart', function(e){ e.preventDefault(); document.addEventListener('touchmove', onMove,{passive:false}); document.addEventListener('touchend', onUp); });
                  }
                  return wrapper.querySelector('#pageMapTimelineHandle');
                }
                function updateHandle(){
                  var h = ensureHandle(); if(!h) return;
                  var v = parseInt(timelineRange.value || 0);
                  var pct = ((v - minT) / ((maxT - minT) || 1)) * 100;
                  pct = Math.max(0, Math.min(100, pct));
                  h.style.left = pct + '%';
                  h.setAttribute('title', new Date(v).toLocaleString());
                }
                // wire range events so handle moves when slider changes
                try{ timelineRange.addEventListener('input', updateHandle); }catch(e){}
                // initial update
                try{ updateHandle(); }catch(e){}
              }catch(e){ console.warn('Timeline handle init failed', e); }
            }
          }catch(e){ console.warn('Timeline dots render failed', e); }
        } else {
          timelineRange.disabled = true; timelineLabel.textContent = 'No activities';
        }

        // append items (oldest first so newest appears last by addActivity which inserts at top)
        for(const it of items){
          const dateStr = it.date.toLocaleString();
          const countStr = it.count ? (it.count + (typeof it.count === 'number' ? ' Mushaf' : '')) : '';
          // Render Sumud-style activity card
          const card = document.createElement('div'); card.className = 'activity-card';
          // stack top row and attachment vertically so the attachment spans full card width
          card.style.flexDirection = 'column';
          card.style.alignItems = 'stretch';
          card.setAttribute('data-activity-id', it.id);
          card.setAttribute('data-ts', it.date.getTime());
          card._ts = it.date.getTime();
          let thumb = `<div class="thumb"><span class="activity-dot" aria-hidden="true"></span></div>`;
          // keep the small dot thumb (do not replace it with an inline image)
          const meta = `<div class="meta"><div class="date">${dateStr}</div><div class="location">${it.location||''}</div></div>`;
          const body = `<div class="body">${meta}<div class="title">${it.title}</div><div class="desc">${it.note||''}</div></div>`;
          const cta = `<div class="cta"><div class="activity-count">${it.count?it.count:''}</div></div>`;
              const topRow = `<div style="display:flex;gap:12px;align-items:flex-start;width:100%">${thumb}${body}${cta}</div>`;
              // attachment row (full width) if present
              let attachmentHtml = '';
              try{
                if(it.attachment && (it.attachment.type === 'photo' || it.attachment.webPath || it.attachment.path)){
                  var src = '';
                  try{
                    var raw = it.attachment.webPath || it.attachment.path || '';
                    raw = String(raw);
                    // If DB returns a public URL (recommended), use it directly.
                    if(raw.indexOf('http://') === 0 || raw.indexOf('https://') === 0){
                      src = raw;
                    } else {
                      // Back-compat: local file paths from the old bot
                      raw = raw.replace(/\\\\/g, '/').replace(/\\/g,'/');
                      var parts = raw.split('/');
                      var bn = parts.pop() || parts.pop();
                      if(!bn) bn = raw;
                      src = './telegram-bot/uploads/' + bn;
                    }
                  }catch(e){ src = ''; }
                  // render attachment as full-width 16:9 cover (will crop to fill)
                  attachmentHtml = `<div class="attachment-row" style="margin-top:10px;width:100%"><div class="attachment-inner" style="width:100%;position:relative;padding-top:56.25%;overflow:hidden;border-radius:8px;border:1px solid rgba(255,255,255,0.04)"><img class="attachment-img" src="${src}" style="position:absolute;top:0;left:0;width:100%;height:100%;object-fit:cover;object-position:center center;display:block;" alt="attachment"/></div></div>`;
                }
              }catch(e){ }
              card.innerHTML = topRow + attachmentHtml;
          // insert newest at top
          feedUL.insertBefore(card, feedUL.firstChild);
          card.addEventListener('click', ()=>{
            const m = markersById[it.id];
            if(!m) return;
            try{
              // temporarily lift map max bounds so the map can move freely
              var prevBounds = null;
              try{ prevBounds = map.getMaxBounds ? map.getMaxBounds() : null; }catch(e){}
              try{ map.setMaxBounds && map.setMaxBounds(null); }catch(e){}
              // center/zoom to marker
              map.setView(m.getLatLng(), Math.max(6, map.getZoom()));
              m.openPopup && m.openPopup();
              // restore previous bounds after a short delay
              setTimeout(function(){ try{ if(prevBounds) map.setMaxBounds(prevBounds); }catch(e){} }, 3000);
            }catch(e){ console.warn('Feed click navigation failed', e); }
          });

          if(it.lat!=null && it.lng!=null){
            const m = L.circleMarker([it.lat, it.lng], { radius:6, color:'#ff6b6b', fill: true, fillColor: '#ff6b6b', fillOpacity: 0.95, weight: 1 });
            // try to add to markerLayer, fallback to map if markerLayer isn't a proper LayerGroup
            try{ if(markerLayer && typeof markerLayer.addLayer === 'function'){ markerLayer.addLayer(m); } else { m.addTo(map); } }catch(e){ try{ m.addTo(map); }catch(_){ console.warn('Failed to add marker to any layer', _); } }
            m.bindPopup(`<div style="color:#f4f2ee"><b>${it.title}</b><div style="opacity:.8;font-size:13px">${it.location}</div><div style="margin-top:6px">${it.note}</div><div style="margin-top:6px;font-weight:700">${it.count?it.count+' Mushaf':''}</div></div>`);
            m._ts = it.date.getTime();
            markersById[it.id] = m;
          }
        }

        // Build full movement coords from chronological items
        const movementCoords = items.filter(i=>i.lat!=null && i.lng!=null).map(i=>[i.lat, i.lng]);
        movementFullLine.setLatLngs(movementCoords);
        lastItems = items;

        // initial progress based on current timeline value
        try{ const maxT = timelineRange ? parseInt(timelineRange.value) : Date.now(); updateMovementProgress(maxT); }catch(e){}

        applyFilter();
        }

        function applyFilter(){
          const maxT = parseInt(timelineRange.value);
          // Update timeline label to show counts for the selected time bucket
          try{
            var total = (lastItems && lastItems.length) ? lastItems.length : 0;
            var visible = 0;
            if(total){
              visible = (lastItems || []).filter(function(i){
                var ts = (i._ts || (i.date && (i.date.getTime ? i.date.getTime() : new Date(i.date).getTime())) || 0);
                return ts <= maxT;
              }).length;
            }
            var labelText;
            if(total === 0){
              labelText = 'No activities';
            } else if(visible === total){
              labelText = 'All (' + total + ')';
            } else {
              labelText = visible + ' / ' + total + ' activities Â· ' + new Date(maxT).toLocaleString();
            }
            // write to the preferred page-level label and also update the in-map label if present
            try{ if(timelineLabel) timelineLabel.textContent = labelText; }catch(e){}
            try{ var inMapLabel = document.getElementById('mapTimelineLabel'); if(inMapLabel) inMapLabel.textContent = labelText; }catch(e){}
          }catch(e){
            // fallback to date when anything goes wrong
            try{ var fallback = new Date(maxT).toLocaleString(); if(timelineLabel) timelineLabel.textContent = fallback; var inMapLabel = document.getElementById('mapTimelineLabel'); if(inMapLabel) inMapLabel.textContent = fallback; }catch(_){ if(timelineLabel) timelineLabel.textContent = 'Timeline'; }
          }

          // feed items
          Array.from(feedUL.children).forEach(li=>{
            const ts = parseInt(li.getAttribute('data-ts') || li._ts || 0);
            li.style.display = (ts <= maxT) ? '' : 'none';
          });
          // markers
          for(const id in markersById){
            const m = markersById[id];
            if(!m) continue;
            try{
              if((m._ts || 0) <= maxT){
                if(markerLayer && typeof markerLayer.addLayer === 'function') markerLayer.addLayer(m); else map.addLayer(m);
              } else {
                if(markerLayer && typeof markerLayer.removeLayer === 'function') markerLayer.removeLayer(m); else map.removeLayer && map.removeLayer(m);
              }
            }catch(e){
              // final fallback: toggle marker on map
              try{ if((m._ts || 0) <= maxT) map.addLayer(m); else map.removeLayer && map.removeLayer(m); }catch(_){ console.warn('Marker toggle failed', _); }
            }
          }
          // update movement progress line to show path up to maxT
          try{ updateMovementProgress(maxT); }catch(e){}
          // update page timeline dot active states
          try{
            var dots = document.querySelectorAll('#pageMapTimelineDots .page-timeline-dot');
            dots && Array.from(dots).forEach(function(d){
              var ts = parseInt(d.getAttribute('data-ts')||0);
              if(ts <= maxT) d.classList.add('active'); else d.classList.remove('active');
            });
          }catch(e){}
        }

        function updateMovementProgress(maxT){
          if(!lastItems || !lastItems.length) return;
          const coordsUpTo = lastItems.filter(i=> (i.lat!=null && i.lng!=null) && (i.date.getTime() <= maxT) ).map(i=>[i.lat, i.lng]);
          movementProgressLine.setLatLngs(coordsUpTo);
        }
        timelineRange.addEventListener('input', applyFilter);

        // helper: adjust attachment wrapper to match image aspect ratio (so portrait fills taller)
        function adjustAttachmentAspects(){
          try{
            var imgs = document.querySelectorAll('.attachment-inner .attachment-img');
            imgs && Array.from(imgs).forEach(function(img){
              function apply(){
                try{
                  var w = img.naturalWidth || img.width;
                  var h = img.naturalHeight || img.height;
                  if(!w || !h) return;
                  var pct = (h / w) * 100;
                  var wrap = img.closest('.attachment-inner');
                  if(wrap) wrap.style.paddingTop = pct.toFixed(2) + '%';
                }catch(e){}
              }
              if(img.complete) apply(); else img.addEventListener('load', apply);
            });
          }catch(e){/* ignore */}
        }

        // load & render
        load().then(render).catch(e=>console.warn(e));
      });
    })();
    </script>
    <script>
      // Floating tooltip logic: attach a tooltip element to body so it won't be clipped by parents
      (function(){
        var currentTip = null;
        function removeTip(){ if(currentTip && currentTip.parentNode){ currentTip.parentNode.removeChild(currentTip); currentTip = null; } }
        function showTip(target){
          var text = target.getAttribute('data-tooltip');
          if(!text) return;
          removeTip();
          var tip = document.createElement('div'); tip.className = 'activity-floating-tooltip'; tip.textContent = text;
          document.body.appendChild(tip);
          // position
          var rect = target.getBoundingClientRect();
          var tipRect = tip.getBoundingClientRect();
          var left = rect.left + rect.width/2 - tipRect.width/2;
          left = Math.max(8, Math.min(left, window.innerWidth - tipRect.width - 8));
          var top = rect.top - tipRect.height - 10;
          if(top < 8) top = rect.bottom + 10;
          tip.style.left = left + 'px';
          tip.style.top = top + 'px';
          // animate in
          requestAnimationFrame(function(){ tip.style.opacity = '1'; tip.style.transform = 'translateY(0)'; });
          currentTip = tip;
        }

        // event delegation: mouseover / mouseout for elements with class 'activity-title'
        document.addEventListener('mouseover', function(e){
          var t = e.target.closest && e.target.closest('.activity-title');
          if(t) showTip(t);
        });
        document.addEventListener('mouseout', function(e){
          var t = e.relatedTarget;
          // remove whenever the mouse leaves the title area
          var from = e.target.closest && e.target.closest('.activity-title');
          if(from && (!t || !t.closest || !t.closest('.activity-title'))){ removeTip(); }
        });

        // Also remove tip on scroll or resize to avoid stale positioning
        window.addEventListener('scroll', function(){ removeTip(); }, true);
        window.addEventListener('resize', function(){ removeTip(); });
      })();
    </script>
    
<script>
(function() {
  // ---- wait until the Folium map object exists (so addControl is defined) ----
  function whenMapReady(fn) {
    var tries = 0;
    (function tick() {
      var map = window['map_650a101fa46c8081aa4ee9eed624a32a'];
      if (map && typeof map.addControl === 'function') { fn(map); return; }
      if (tries++ < 400) return setTimeout(tick, 25); // up to ~10s
      console.warn('Map never became ready for addControl/locking');
    })();
  }

  // ---- LOCKED BOUNDS ----
  whenMapReady(function(map) {
    var bounds = L.latLngBounds(
      L.latLng(-14.545707045, -8.136150595),
      L.latLng(51.477986145, 49.206765295)
    );
    map.fitBounds(bounds, { padding:[20,20] });
    map.setMaxBounds(bounds.pad(0.05));
    map.options.maxBoundsViscosity = 1.0;
    map.options.worldCopyJump = false;
    map.options.inertia = false;
    map.setMinZoom(Math.max(map.getZoom() - 1, 2));
    map.setMaxZoom(12);
  });

  
})();
</script>

<!-- Legend control removed -->
    
            <div class="folium-map" id="map_650a101fa46c8081aa4ee9eed624a32a" ></div>

            <!-- Page-level timeline placed directly after the map -->
            <div id="pageMapTimeline" style="max-width:1180px;margin:8px auto 0;padding:0 16px;">
              <div style="background:transparent;display:flex;align-items:center;gap:12px;color:#cfc6b8;font-size:13px;">
                <label style="min-width:78px;color:#cfc6b8;font-weight:700;">Timeline</label>
                <div style="flex:1; position:relative; height:44px;">
                  <!-- range sits inside a relative container so we can absolutely place incident buttons above it -->
                  <input id="pageMapTimelineRange" type="range" style="position:absolute;left:0;right:0;top:50%;transform:translateY(-50%);width:100%; height:14px; background:transparent; -webkit-appearance:none; z-index:3;">
                    <style>
                      /* style the native range thumb to be subtle and transparent so the custom track shows through */
                      #pageMapTimelineRange::-webkit-slider-runnable-track{ height:14px; background:transparent; }
                      #pageMapTimelineRange::-webkit-slider-thumb{ -webkit-appearance:none; width:18px; height:18px; margin-top:-2px; background:transparent; border-radius:50%; }
                      #pageMapTimelineRange::-moz-range-track{ height:14px; background:transparent; }
                      #pageMapTimelineRange::-moz-range-thumb{ width:18px; height:18px; background:transparent; border:none; }
                    </style>
                  <div id="pageMapTimelineTrack" class="page-timeline-track" aria-hidden="true"></div>
                  <div id="pageMapTimelineCountsWrapper" style="position:absolute; left:0; right:0; top:50%; transform:translateY(-50%); pointer-events:auto;">
                    <div id="pageMapTimelineCounts" class="page-timeline-counts" aria-hidden="true"></div>
                  </div>
                  <div id="pageMapTimelineDotsWrapper" style="position:absolute; left:0; right:0; top:50%; transform:translateY(-50%); pointer-events:auto; z-index:4;">
                    <div id="pageMapTimelineDots" class="page-timeline-dots" aria-hidden="true"></div>
                  </div>
                </div>
                <div id="pageMapTimelineLabel" style="min-width:180px; text-align:right; color:#cfc6b8; font-size:13px;">All</div>
              </div>
            </div>

           
        
    
<style>
  html, body { background:#0f1114; }
  .folium-map, .leaflet-container { background:#0f1114 !important; }
  /* optional: remove any default top/bottom gaps */
  body { margin:0; }
</style>
    
<style>
  /* tiny inline dot for table cells */
  .pulse-dot{
    display:inline-block; vertical-align:middle; margin-right:8px;
    width:10px; height:10px; background:#6be27d; border-radius:50%;
    box-shadow:0 0 0 0 rgba(107,226,125,.7);
    animation:pulse 1.8s ease-out infinite;
  }
  @keyframes pulse{
    0%   { box-shadow:0 0 0 0 rgba(107,226,125,.7); }
    70%  { box-shadow:0 0 0 10px rgba(107,226,125,0); }
    100% { box-shadow:0 0 0 0 rgba(107,226,125,0); }
  }

  /* larger pulsing pin for the map (DivIcon) */
  .pulse-pin{
    position:relative; width:16px; height:16px; border-radius:50%;
    background:#6be27d; box-shadow:0 0 0 0 rgba(107,226,125,.6);
    animation:pulse 1.8s ease-out infinite;
  }
  .pulse-pin:after{
    content:""; position:absolute; left:50%; top:50%;
    width:26px; height:26px; margin:-13px 0 0 -13px; border-radius:50%;
    border:2px solid rgba(107,226,125,.45);
    animation:ripple 1.8s ease-out infinite;
  }
  @keyframes ripple { from{transform:scale(.6); opacity:.9} to{transform:scale(1.5); opacity:0} }
</style>
    
<script>
  (function(){
    var data = [{'label': 'Chad', 'lat': 15.454166, 'lng': 18.732207}, {'label': 'Djibouti', 'lat': 11.825138, 'lng': 42.590275}, {'label': 'Niger', 'lat': 17.607789, 'lng': 8.081666}, {'label': 'Cameroon', 'lat': 12.087083, 'lng': 15.0148322}, {'label': 'Ethiopia', 'lat': 8.5263486, 'lng': 39.2583293}, {'label': 'Tanzania', 'lat': -6.1629685, 'lng': 39.1865491}, {'label': 'Tanzania', 'lat': -6.9275886, 'lng': 39.1335549}, {'label': 'Tanzania', 'lat': -6.135729500000001, 'lng': 39.3621196}, {'label': 'Sarajevo, Bosnia', 'lat': 43.8598677, 'lng': 18.4128265}, {'label': 'Ouagadougou, Burkina Faso', 'lat': 12.3714277, 'lng': -1.5196603}];
    function whenMapReady(cb){
      var tries = 0;
      (function tick(){
        var m = window['map_650a101fa46c8081aa4ee9eed624a32a'];
        if(m && typeof m.addControl === 'function'){ cb(m); return; }
        if(tries++ < 400) return setTimeout(tick, 25);
        console.warn('Search: map not ready');
      })();
    }

    whenMapReady(function(map){
      // Build a simple layer of invisible markers for search hits
      var searchLayer = L.layerGroup();
      try{
        data.forEach(function(p){
          if(!p || p.lat == null || p.lng == null) return;
          L.marker([p.lat, p.lng], { title: p.label || '' , opacity: 0 }).addTo(searchLayer);
        });
        map.addLayer(searchLayer);

        // Leaflet.Control.Search (from leaflet-control-search)
        var searchControl = new L.Control.Search({
          layer: searchLayer,
          propertyName: 'title',
          marker: false,
          moveToLocation: function(latlng, title, map){
            map.setView(latlng, Math.max(6, map.getZoom()));
          }
        });
        map.addControl(searchControl);
      }catch(e){
        console.warn('Search control init failed', e);
      }
    });
  })();
</script>
    
<style>
  /* Dark popup shell (remove Leaflet's white) */
  .leaflet-popup-content-wrapper {
    background: #1b1e22;              /* dark panel */
    color: #f4f2ee;                   /* light text */
    border: 1px solid rgba(190,170,141,.45); /* #BEAA8D-ish */
    border-radius: 14px;
    box-shadow: 0 16px 44px rgba(0,0,0,.55);
    padding: 0;                       /* we'll pad the inner content */
  }
  /* The little triangle tip */
  .leaflet-popup-tip {
    background: #1b1e22;
    border: 1px solid rgba(190,170,141,.45);
    box-shadow: 0 8px 24px rgba(0,0,0,.35);
  }
  /* Inner content area margin/padding */
  .leaflet-popup-content {
    margin: 0;                        /* wipe defaults */
    padding: 14px 16px 12px 16px;     /* comfy spacing */
    min-width: 240px;
  }
  /* Close (Ã—) button */
  .leaflet-container a.leaflet-popup-close-button {
    color: #f4f2ee !important;
    background: rgba(0,0,0,.35);
    border-radius: 8px;
    width: 28px; height: 28px; line-height: 28px;
    right: 8px; top: 8px;
  }
  .leaflet-container a.leaflet-popup-close-button:hover {
    background: rgba(190,170,141,.35);
  }

  /* Tooltips (the small white label you see on hover) */
  .leaflet-tooltip {
    background: rgba(0,0,0,.85);
    color: #f4f2ee;
    border: 1px solid rgba(190,170,141,.45);
    border-radius: 8px;
    box-shadow: 0 6px 18px rgba(0,0,0,.35);
  }
  .leaflet-tooltip-left:before { border-right-color: rgba(0,0,0,.85); }

  /* Normalize generated popup inner boxes so they match the Leaflet popup shell */
  .leaflet-popup-content > div { background: transparent !important; box-shadow: none !important; border: none !important; width: auto !important; height: auto !important; padding: 0 !important; }
  .leaflet-popup-content > div > div { background: transparent !important; box-shadow: none !important; border: none !important; padding: 0 !important; }
  .leaflet-popup-content a { display: inline-block; margin-top: 6px; background: #BEAA8D; color: #111315; font-weight: 700; padding: 8px 10px; border-radius: 8px; text-decoration: none; }
  .leaflet-tooltip-right:before { border-left-color: rgba(0,0,0,.85); }
  .leaflet-tooltip-top:before { border-bottom-color: rgba(0,0,0,.85); }
  .leaflet-tooltip-bottom:before { border-top-color: rgba(0,0,0,.85); }
</style>

<style>
  /* Mobile: float the activity feed as an overlay container on top of the map, below the header */
  @media (max-width: 720px) {
    .map-activity-control {
      /* default desktop control stays inside map; mobile will move this into page flow via JS */
      position: absolute !important;
      left: auto !important;
      right: 8px !important;
      top: 8px !important;
      z-index: 14000 !important;
      max-width: 380px !important;
      width: 280px !important;
      background: rgba(17,19,21,0.95) !important;
      border-radius: 12px !important;
      box-shadow: 0 20px 48px rgba(0,0,0,.6) !important;
      padding: 10px !important;
    }
    .map-activity-control .mac-content { max-height: 42vh !important; overflow:auto; }
    /* make the collapsed toggle stick to the right edge and visible */
    .map-activity-control .map-activity-toggle { position: absolute; right: 10px; top: 8px; }
    /* ensure page timeline sits below the floating feed when present */
    #pageMapTimeline { margin-top: 56px; }
    /* When control is moved into the page flow it will naturally push the map down; default map height adjusted via JS when moving control. */
  }
</style>

<style>
  /* Styles when the control has been moved into the page flow (mobile) */
  .map-activity-control.mobile-flow {
    position: static !important;
    width: 100% !important;
    max-width: none !important;
    margin: 0 !important;
    /* provide comfortable horizontal padding on small screens */
    box-sizing: border-box !important;
    padding-left: 20px !important;
    padding-right: 20px !important;
    left: 0 !important;
    right: 0 !important;
    top: auto !important;
  }
</style>
    
<style>
  :root {
    --bg:#0f1114; --panel:#171a1f; --text:#f4f2ee; --muted:#bda988;
    --border:rgba(190,170,141,.35); --rowAlt:rgba(190,170,141,.05);
  }
  .dash-wrap { max-width: 1180px; margin: calc(var(--header-h,56px) + 8px) auto 28px; padding: 0 16px; font-family: system-ui, Arial; }
  .dash-title { color: var(--text); font-size: 20px; font-weight: 800; margin: 12px 0; }

  .table-wrap { background:transparent; overflow-x:auto; border-radius:12px; }
  .tbl {
    min-width: 720px; width:100%;
    background:var(--panel); color:var(--text);
    border:1px solid var(--border); border-radius:12px; overflow:hidden;
    box-shadow: 0 6px 22px rgba(0,0,0,.35);
    border-collapse:collapse;
  }
  .tbl thead th {
    position: sticky; top: 0px;
    background: rgba(190,170,141,.14); color:var(--text);
    font-size:13px; font-weight:800; text-align:left; padding:12px 14px;
    border-bottom:1px solid var(--border); white-space:nowrap; z-index:1;
  }
  .tbl tbody td { padding:8px 12px; border-top:1px solid var(--border); vertical-align:top; }
  .tbl tbody tr:nth-child(even) td { background: var(--rowAlt); }
  .tbl .num { text-align:right; font-variant-numeric: tabular-nums; }

  /* NEW: style blanks */
  .tbl td.placeholder { color:#888; font-style:italic; }
</style>

<div class="dash-wrap">
  <div class="dash-title">Project Locations</div>
  <div class="table-wrap">
    <table class="tbl" id="impactTable">
      <thead>
        <tr>
          <th>Impact</th>
          <th>Place</th>
          <th>Benefitors</th>
          <th class="num">Total Qur'an</th>
        </tr>
      </thead>
      <tbody>
        <tr class=''><td><span class="chip " style="--chip:#ff6b6b">High Impact</span></td><td>Tanzania</td><td>Chaani, Shangani, Potoa, Kidoti</td><td class="num">8,680</td></tr><tr class=''><td><span class="chip " style="--chip:#ff6b6b">High Impact</span></td><td>Chad</td><td class="placeholder">â€”</td><td class="num">5,000</td></tr><tr class=''><td><span class="chip " style="--chip:#ffaa3b">Moderate</span></td><td>Djibouti</td><td class="placeholder">â€”</td><td class="num">4,000</td></tr><tr class=''><td><span class="chip " style="--chip:#ffaa3b">Moderate</span></td><td>Niger</td><td class="placeholder">â€”</td><td class="num">4,000</td></tr><tr class=''><td><span class="chip " style="--chip:#ffaa3b">Moderate</span></td><td>Tanzania</td><td>Dar Es Salaam, Pulau Zanzibar</td><td class="num">3,000</td></tr><tr class=''><td><span class="chip " style="--chip:#ffaa3b">Moderate</span></td><td>Cameroon</td><td>Kousseri, Youndi</td><td class="num">2,000</td></tr><tr class=''><td><span class="chip " style="--chip:#ffaa3b">Moderate</span></td><td>Sarajevo, Bosnia</td><td>Masjid Ship, Masjid Jezero, Masjid Sedrenik</td><td class="num">1,650</td></tr><tr class=''><td><span class="chip " style="--chip:#ffaa3b">Moderate</span></td><td>Tanzania</td><td>Ilala, Temeke</td><td class="num">1,650</td></tr><tr class=''><td><span class="chip " style="--chip:#ffaa3b">Moderate</span></td><td>Ethiopia</td><td>Adama, Odomia</td><td class="num">1,000</td></tr><tr class='active-row'><td><span class="chip chip--active" style="--chip:#ff6b6b">Active</span></td><td><span class="pulse-dot" title="Launch: 22 Dec 2025"></span>Ouagadougou, Burkina Faso</td><td>Madrasah Izharuddin, Kombissiri</td><td class="num">8,000</td></tr>
      </tbody>
    </table>
  </div>
</div>
    
<style>
  /* Solid backgrounds so the map can't show through */
  .table-wrap { background:#171a1f; }
  .tbl       { background:#171a1f; }

  /* Header */
  .tbl thead th{
    background:#1e2227 !important;
    background-image:none !important;
    box-shadow:none !important;
  }

  /* Body cells */
  .tbl td{
    background:#171a1f !important;
    background-image:none !important;   /* kill any gradients */
    box-shadow:none !important;
  }
  .tbl tbody tr:nth-child(even) td{
    background:#1b1f24 !important;      /* subtle zebra, still solid */
  }

  /* Numeric column has no progress-like visuals */
  .tbl .num{
    background:transparent !important;
    background-image:none !important;
  }

</style>
    
<style>
  .chip--active{
    background: rgba(255,107,107,.10) !important; /* soft red fill */
    border: 2px solid #ff6b6b !important;
    border-radius: 10px !important;
    color: #ffcdcd !important;
    padding: 3px 10px !important;
    box-shadow: 0 0 0 1px rgba(255,107,107,.25) inset;
  }
</style>

<style>
  /* Highlight the active project row with brand colors */
  .tbl tbody tr.active-row {
    background: linear-gradient(90deg, rgba(190,170,141,0.06), rgba(190,170,141,0.02));
    border-left: 6px solid #BEAA8D; /* brand accent */
    box-shadow: 0 8px 24px rgba(190,170,141,0.06) inset;
    transition: transform .12s ease, box-shadow .12s ease, background .12s ease;
  }
  .tbl tbody tr.active-row td { color: #f7efe0; }
  .tbl tbody tr.active-row:hover {
    transform: translateY(-2px);
    box-shadow: 0 12px 28px rgba(190,170,141,0.12), 0 2px 6px rgba(0,0,0,0.35) inset;
    background: linear-gradient(90deg, rgba(190,170,141,0.10), rgba(190,170,141,0.04));
  }
  /* Make the pulse-dot more prominent for active row */
  .tbl tbody tr.active-row .pulse-dot{ box-shadow:0 0 0 6px rgba(255,107,107,0.06); }
</style>
    
<script>
  (function(){
    const table = document.getElementById('impactTable');
    if(!table) return;
    const headCells = table.querySelectorAll('thead th');
    headCells.forEach((th, idx) => {
      th.style.cursor = 'pointer';
      th.addEventListener('click', () => {
        const tbody = table.querySelector('tbody');
        const rows = Array.from(tbody.querySelectorAll('tr'));
        const asc = th.classList.toggle('asc');
        headCells.forEach(h => { if(h!==th) h.classList.remove('asc'); });
        const isNum = th.classList.contains('num');
        const val = (tr) => {
          const t = tr.children[idx].textContent.trim();
          return isNum ? (parseInt(t.replace(/[^0-9]/g,'')) || 0) : t.toLowerCase();
        };
        rows.sort((a,b) => {
          const va = val(a), vb = val(b);
          return isNum ? (asc ? va - vb : vb - va) : (asc ? (va>vb)-(va<vb) : (vb>va)-(vb<va));
        });
        rows.forEach(r => tbody.appendChild(r));
      });
    });
  })();
</script>
    
<style>
  /* Desktop keeps all 4 columns (unchanged) */

  /* Tablet and down: show only Place, Benefitors, Total Qur'an */
  @media (max-width: 992px){
    /* remove wide min-width so it can shrink naturally */
    .tbl{ min-width: 0; }

    /* hide the 1st column (Impact) in header and body */
    .tbl thead th:nth-child(1),
    .tbl tbody td:nth-child(1){ display:none; }

    /* tighten padding a bit */
    .tbl thead th{ padding:10px 12px; }
    .tbl tbody td{ padding:8px 12px; }
  }

  /* Small phones: a bit tighter yet */
  @media (max-width: 520px){
    .tbl thead th{ top: 0px; font-size:12px; }
    .tbl tbody td{ padding:8px 10px; }
    .tbl tbody tr.active-row {
    background: rgba(190, 170, 141, 0.35);   /* light #BEAA8D tint */
    border: 1px solid #BEAA8D;
    box-shadow: 0 0 10px 2px rgba(190, 170, 141, 0.35);
    transition: box-shadow 0.3s ease, background 0.3s ease;
    }
    /* Optional hover effect */
    .tbl tbody tr.active-row:hover {
    background: rgba(190, 170, 141, 0.25);
    box-shadow: 0 0 12px 3px rgba(190, 170, 141, 0.45);
    }
  }
</style>
    
<!-- Donate/Waqf button removed -->
    
<style>
  /* scoped to the dashboard area */
  .kpi-wrap {
    max-width: 1180px; margin: calc(var(--header-h,6px) + 8px) auto 10px; 
    padding: 16px; font-family: system-ui, Arial;
  }
  .kpi-card {
    background:#171a1f; color:#f4f2ee; 
    border:1px solid rgba(190,170,141,.35); 
    border-radius:12px; padding:16px; 
    box-shadow:0 6px 22px rgba(0,0,0,.35);
  }
  .kpi-row {
    display:flex; align-items:baseline; flex-wrap:wrap; gap:18px; margin-bottom:10px;
  }
  .kpi-title { font-weight:800; font-size:18px; letter-spacing:.2px; }
  .kpi-numbers { margin-left:auto; display:flex; gap:18px; }
  .kpi-numbers .item small { display:block; opacity:.7; font-size:12px; }
  .kpi-numbers .item b { font-weight:800; font-size:16px; }

  .progress-outer {
    width:100%; height:16px; 
    background:#0f1114; 
    border:1px solid rgba(190,170,141,.35); 
    border-radius:999px; overflow:hidden;
  }
  .progress-inner {
    height:100%; width:0%;
    background:#BEAA8D;
    border-right:2px solid rgba(255,255,255,.25);
    transition: width .8s ease;
  }
  .progress-foot {
    display:flex; justify-content:space-between; 
    font-size:12px; opacity:.8; margin-top:8px;
  }

  @media (max-width: 520px) {
    .kpi-numbers { width:100%; margin-left:0; }
  }
</style>

<div class="kpi-wrap">
  <div class="kpi-card">
    <div class="kpi-row">
      <div class="kpi-title">Naskhah Al-Qurâ€™an Telah Diedarkan<br>Seluruh Dunia</div>
      <div class="kpi-numbers">
        <div class="item">
          <small>Malaysia</small>
          <b>31,230</b>
        </div>
        <div class="item">
          <small>All</small>
          <b>1,453,456</b>
        </div>
        <div class="item">
          <small>Target</small>
          <b>10,000,000</b>
        </div>
      </div>
    </div>

    <div class="progress-outer" aria-label="Overall progress" role="progressbar" 
         aria-valuemin="0" aria-valuemax="100" aria-valuenow="14.53">
      <div class="progress-inner" style="width:14.53%;"></div>
    </div>
    <div class="progress-foot">
      <span>14.53%</span><span>100%</span>
    </div>
  </div>
</div>
</body>
<script>
    
    
            var map_650a101fa46c8081aa4ee9eed624a32a = L.map(
                "map_650a101fa46c8081aa4ee9eed624a32a",
                {
                    center: [10.25055334, 25.82526993],
                    crs: L.CRS.EPSG3857,
                    ...{
  "zoom": 3,
  "zoomControl": true,
  "preferCanvas": false,
}

                }
            );

            

        
    
            var tile_layer_0205bfd226cfa1b960c5393589936452 = L.tileLayer(
                "https://api.mapbox.com/styles/v1/mapbox/dark-v11/tiles/256/{z}/{x}/{y}@2x?access_token=pk.eyJ1IjoibWF0dW11YWR6IiwiYSI6ImNtZ2pnY3RxdzBqMWIyaXNmNWdpZGY1MHcifQ.SaKbTclv2YC_jYCyg4duNA",
                {
  "minZoom": 0,
  "maxZoom": 18,
  "maxNativeZoom": 18,
  "noWrap": false,
  "attribution": "\u00a9 Mapbox \u00a9 OpenStreetMap",
  "subdomains": "abc",
  "detectRetina": false,
  "tms": false,
  "opacity": 1,
}

            );
        
    
            tile_layer_0205bfd226cfa1b960c5393589936452.addTo(map_650a101fa46c8081aa4ee9eed624a32a);
        
    
            var feature_group_42780829d8b3ea0b2243a12a6e93e853 = L.featureGroup(
                {
}
            );
        
    
            feature_group_42780829d8b3ea0b2243a12a6e93e853.addTo(map_650a101fa46c8081aa4ee9eed624a32a);
        
    
            tile_layer_0205bfd226cfa1b960c5393589936452.addTo(map_650a101fa46c8081aa4ee9eed624a32a);
        
    
            feature_group_42780829d8b3ea0b2243a12a6e93e853.addTo(map_650a101fa46c8081aa4ee9eed624a32a);
        
    
            var marker_cluster_38407f48bfb0ef1004c5827501774c97 = L.markerClusterGroup(
                {
  "maxClusterRadius": 20,
  "disableClusteringAtZoom": 5,
  "spiderfyOnMaxZoom": true,
  "showCoverageOnHover": false,
  "zoomToBoundsOnClick": true,
}
            );
        
    
            var circle_marker_a9429c1682d7259ec8aae315b2f6447e = L.circleMarker(
                [15.454166, 18.732207],
                {"bubblingMouseEvents": true, "color": "#E3A821", "dashArray": null, "dashOffset": null, "fill": true, "fillColor": "#FFD55A", "fillOpacity": 0.9, "fillRule": "evenodd", "lineCap": "round", "lineJoin": "round", "opacity": 1.0, "radius": 9, "stroke": true, "weight": 2}
            ).addTo(marker_cluster_38407f48bfb0ef1004c5827501774c97);
        
    
        var popup_62b8b5bfe5e799be1c79aac7ba3f5fbc = L.popup({
  "maxWidth": 320,
});

        
            
                var html_6db4b66411587c9a42bcce4f0a69677b = $(`<div id="html_6db4b66411587c9a42bcce4f0a69677b" style="width: 100.0%; height: 100.0%;">     <div style="width:280px;background:#1b1e22;color:#f4f2ee;border-radius:10px;box-shadow:0 4px 18px rgba(0,0,0,.35);overflow:hidden;border:1px solid rgba(190,170,141,.35);">              <div style="padding:12px 12px 8px 12px;">         <div style="font-weight:700;font-size:15px;margin-bottom:2px;">Chad</div>         <div style="opacity:.7;font-size:12px;margin-bottom:8px;">Chad</div>         <div style="display:flex;gap:14px;font-size:12px;margin-bottom:6px;">           <div>Impact: <b>High Impact</b></div>           <div>Total Qur'an: <b>5,000</b></div>         </div>         <a href="" target="_blank" style="display:inline-block;margin-top:4px;background:#BEAA8D;color:#111315;font-weight:700;padding:8px 10px;border-radius:8px;text-decoration:none;">VIEW DETAILS</a>       </div>     </div>     </div>`)[0];
                popup_62b8b5bfe5e799be1c79aac7ba3f5fbc.setContent(html_6db4b66411587c9a42bcce4f0a69677b);
            
        

        circle_marker_a9429c1682d7259ec8aae315b2f6447e.bindPopup(popup_62b8b5bfe5e799be1c79aac7ba3f5fbc)
        ;

        
    
    
            circle_marker_a9429c1682d7259ec8aae315b2f6447e.bindTooltip(
                `<div>
                     Chad â€” 5000 Qur'an
                 </div>`,
                {
  "sticky": true,
}
            );
        
    
            var circle_marker_36e701f1f7fbbe9b90b7f7c8e4845546 = L.circleMarker(
                [15.454166, 18.732207],
                {"bubblingMouseEvents": true, "color": "#E3A821", "dashArray": null, "dashOffset": null, "fill": true, "fillColor": "#FFD55A", "fillOpacity": 0.9, "fillRule": "evenodd", "lineCap": "round", "lineJoin": "round", "opacity": 1.0, "radius": 9, "stroke": true, "weight": 2}
            ).addTo(marker_cluster_38407f48bfb0ef1004c5827501774c97);
        
    
        var popup_11aa66291246650ea7747fb45754f0e4 = L.popup({
  "maxWidth": 320,
});

        
            
                var html_bb0b15266bb3ba7368a75854f344b2e0 = $(`<div id="html_bb0b15266bb3ba7368a75854f344b2e0" style="width: 100.0%; height: 100.0%;">     <div style="width:280px;background:#1b1e22;color:#f4f2ee;border-radius:10px;box-shadow:0 4px 18px rgba(0,0,0,.35);overflow:hidden;border:1px solid rgba(190,170,141,.35);">              <div style="padding:12px 12px 8px 12px;">         <div style="font-weight:700;font-size:15px;margin-bottom:2px;">Chad</div>         <div style="opacity:.7;font-size:12px;margin-bottom:8px;">Chad</div>         <div style="display:flex;gap:14px;font-size:12px;margin-bottom:6px;">           <div>Impact: <b>High Impact</b></div>           <div>Total Qur'an: <b>5,000</b></div>         </div>         <a href="" target="_blank" style="display:inline-block;margin-top:4px;background:#BEAA8D;color:#111315;font-weight:700;padding:8px 10px;border-radius:8px;text-decoration:none;">VIEW DETAILS</a>       </div>     </div>     </div>`)[0];
                popup_11aa66291246650ea7747fb45754f0e4.setContent(html_bb0b15266bb3ba7368a75854f344b2e0);
            
        

        circle_marker_36e701f1f7fbbe9b90b7f7c8e4845546.bindPopup(popup_11aa66291246650ea7747fb45754f0e4)
        ;

        
    
    
            circle_marker_36e701f1f7fbbe9b90b7f7c8e4845546.bindTooltip(
                `<div>
                     Chad â€” 5000 Qur'an
                 </div>`,
                {
  "sticky": true,
}
            );
        
    
            var circle_marker_88487fe998b4cdfe18714390381b4625 = L.circleMarker(
                [11.825138, 42.590275],
                {"bubblingMouseEvents": true, "color": "#E3A821", "dashArray": null, "dashOffset": null, "fill": true, "fillColor": "#FFD55A", "fillOpacity": 0.9, "fillRule": "evenodd", "lineCap": "round", "lineJoin": "round", "opacity": 1.0, "radius": 9, "stroke": true, "weight": 2}
            ).addTo(marker_cluster_38407f48bfb0ef1004c5827501774c97);
        
    
        var popup_04fc7097e78c5c94fed57ffa1a067f33 = L.popup({
  "maxWidth": 320,
});

        
            
                var html_9f7e59229a84ade63e5c028936f67017 = $(`<div id="html_9f7e59229a84ade63e5c028936f67017" style="width: 100.0%; height: 100.0%;">     <div style="width:280px;background:#1b1e22;color:#f4f2ee;border-radius:10px;box-shadow:0 4px 18px rgba(0,0,0,.35);overflow:hidden;border:1px solid rgba(190,170,141,.35);">              <div style="padding:12px 12px 8px 12px;">         <div style="font-weight:700;font-size:15px;margin-bottom:2px;">Djibouti</div>         <div style="opacity:.7;font-size:12px;margin-bottom:8px;">Djibouti</div>         <div style="display:flex;gap:14px;font-size:12px;margin-bottom:6px;">           <div>Impact: <b>Moderate</b></div>           <div>Total Qur'an: <b>4,000</b></div>         </div>         <a href="" target="_blank" style="display:inline-block;margin-top:4px;background:#BEAA8D;color:#111315;font-weight:700;padding:8px 10px;border-radius:8px;text-decoration:none;">VIEW DETAILS</a>       </div>     </div>     </div>`)[0];
                popup_04fc7097e78c5c94fed57ffa1a067f33.setContent(html_9f7e59229a84ade63e5c028936f67017);
            
        

        circle_marker_88487fe998b4cdfe18714390381b4625.bindPopup(popup_04fc7097e78c5c94fed57ffa1a067f33)
        ;

        
    
    
            circle_marker_88487fe998b4cdfe18714390381b4625.bindTooltip(
                `<div>
                     Djibouti â€” 4000 Qur'an
                 </div>`,
                {
  "sticky": true,
}
            );
        
    
            var circle_marker_8f2afc9b848e325b9101c90bb3bc139c = L.circleMarker(
                [11.825138, 42.590275],
                {"bubblingMouseEvents": true, "color": "#E3A821", "dashArray": null, "dashOffset": null, "fill": true, "fillColor": "#FFD55A", "fillOpacity": 0.9, "fillRule": "evenodd", "lineCap": "round", "lineJoin": "round", "opacity": 1.0, "radius": 9, "stroke": true, "weight": 2}
            ).addTo(marker_cluster_38407f48bfb0ef1004c5827501774c97);
        
    
        var popup_fb1d8dd945b7051fe5a44b0b0bda3dbe = L.popup({
  "maxWidth": 320,
});

        
            
                var html_1a65ba0e959f2fe6a27617cc777e801d = $(`<div id="html_1a65ba0e959f2fe6a27617cc777e801d" style="width: 100.0%; height: 100.0%;">     <div style="width:280px;background:#1b1e22;color:#f4f2ee;border-radius:10px;box-shadow:0 4px 18px rgba(0,0,0,.35);overflow:hidden;border:1px solid rgba(190,170,141,.35);">              <div style="padding:12px 12px 8px 12px;">         <div style="font-weight:700;font-size:15px;margin-bottom:2px;">Djibouti</div>         <div style="opacity:.7;font-size:12px;margin-bottom:8px;">Djibouti</div>         <div style="display:flex;gap:14px;font-size:12px;margin-bottom:6px;">           <div>Impact: <b>Moderate</b></div>           <div>Total Qur'an: <b>4,000</b></div>         </div>         <a href="" target="_blank" style="display:inline-block;margin-top:4px;background:#BEAA8D;color:#111315;font-weight:700;padding:8px 10px;border-radius:8px;text-decoration:none;">VIEW DETAILS</a>       </div>     </div>     </div>`)[0];
                popup_fb1d8dd945b7051fe5a44b0b0bda3dbe.setContent(html_1a65ba0e959f2fe6a27617cc777e801d);
            
        

        circle_marker_8f2afc9b848e325b9101c90bb3bc139c.bindPopup(popup_fb1d8dd945b7051fe5a44b0b0bda3dbe)
        ;

        
    
    
            circle_marker_8f2afc9b848e325b9101c90bb3bc139c.bindTooltip(
                `<div>
                     Djibouti â€” 4000 Qur'an
                 </div>`,
                {
  "sticky": true,
}
            );
        
    
            var circle_marker_2534eb1a1eeec392421942c9539f97d9 = L.circleMarker(
                [17.607789, 8.081666],
                {"bubblingMouseEvents": true, "color": "#E3A821", "dashArray": null, "dashOffset": null, "fill": true, "fillColor": "#FFD55A", "fillOpacity": 0.9, "fillRule": "evenodd", "lineCap": "round", "lineJoin": "round", "opacity": 1.0, "radius": 9, "stroke": true, "weight": 2}
            ).addTo(marker_cluster_38407f48bfb0ef1004c5827501774c97);
        
    
        var popup_611e31ba94e042d1a5cc618b622ee80a = L.popup({
  "maxWidth": 320,
});

        
            
                var html_7c4de46017a320604056ab7746f640d2 = $(`<div id="html_7c4de46017a320604056ab7746f640d2" style="width: 100.0%; height: 100.0%;">     <div style="width:280px;background:#1b1e22;color:#f4f2ee;border-radius:10px;box-shadow:0 4px 18px rgba(0,0,0,.35);overflow:hidden;border:1px solid rgba(190,170,141,.35);">              <div style="padding:12px 12px 8px 12px;">         <div style="font-weight:700;font-size:15px;margin-bottom:2px;">Niger</div>         <div style="opacity:.7;font-size:12px;margin-bottom:8px;">Niger</div>         <div style="display:flex;gap:14px;font-size:12px;margin-bottom:6px;">           <div>Impact: <b>Moderate</b></div>           <div>Total Qur'an: <b>4,000</b></div>         </div>         <a href="" target="_blank" style="display:inline-block;margin-top:4px;background:#BEAA8D;color:#111315;font-weight:700;padding:8px 10px;border-radius:8px;text-decoration:none;">VIEW DETAILS</a>       </div>     </div>     </div>`)[0];
                popup_611e31ba94e042d1a5cc618b622ee80a.setContent(html_7c4de46017a320604056ab7746f640d2);
            
        

        circle_marker_2534eb1a1eeec392421942c9539f97d9.bindPopup(popup_611e31ba94e042d1a5cc618b622ee80a)
        ;

        
    
    
            circle_marker_2534eb1a1eeec392421942c9539f97d9.bindTooltip(
                `<div>
                     Niger â€” 4000 Qur'an
                 </div>`,
                {
  "sticky": true,
}
            );
        
    
            var circle_marker_bec5be85bc6a8263a746b10688f1e89b = L.circleMarker(
                [17.607789, 8.081666],
                {"bubblingMouseEvents": true, "color": "#E3A821", "dashArray": null, "dashOffset": null, "fill": true, "fillColor": "#FFD55A", "fillOpacity": 0.9, "fillRule": "evenodd", "lineCap": "round", "lineJoin": "round", "opacity": 1.0, "radius": 9, "stroke": true, "weight": 2}
            ).addTo(marker_cluster_38407f48bfb0ef1004c5827501774c97);
        
    
        var popup_9f2298bf3283385b248e91bc9451a014 = L.popup({
  "maxWidth": 320,
});

        
            
                var html_00bb157557538fa436b7073dbf35d3d1 = $(`<div id="html_00bb157557538fa436b7073dbf35d3d1" style="width: 100.0%; height: 100.0%;">     <div style="width:280px;background:#1b1e22;color:#f4f2ee;border-radius:10px;box-shadow:0 4px 18px rgba(0,0,0,.35);overflow:hidden;border:1px solid rgba(190,170,141,.35);">              <div style="padding:12px 12px 8px 12px;">         <div style="font-weight:700;font-size:15px;margin-bottom:2px;">Niger</div>         <div style="opacity:.7;font-size:12px;margin-bottom:8px;">Niger</div>         <div style="display:flex;gap:14px;font-size:12px;margin-bottom:6px;">           <div>Impact: <b>Moderate</b></div>           <div>Total Qur'an: <b>4,000</b></div>         </div>         <a href="" target="_blank" style="display:inline-block;margin-top:4px;background:#BEAA8D;color:#111315;font-weight:700;padding:8px 10px;border-radius:8px;text-decoration:none;">VIEW DETAILS</a>       </div>     </div>     </div>`)[0];
                popup_9f2298bf3283385b248e91bc9451a014.setContent(html_00bb157557538fa436b7073dbf35d3d1);
            
        

        circle_marker_bec5be85bc6a8263a746b10688f1e89b.bindPopup(popup_9f2298bf3283385b248e91bc9451a014)
        ;

        
    
    
            circle_marker_bec5be85bc6a8263a746b10688f1e89b.bindTooltip(
                `<div>
                     Niger â€” 4000 Qur'an
                 </div>`,
                {
  "sticky": true,
}
            );
        
    
            var circle_marker_5bf6a02356428ffed5fe63633f4e52ce = L.circleMarker(
                [12.087083, 15.0148322],
                {"bubblingMouseEvents": true, "color": "#E3A821", "dashArray": null, "dashOffset": null, "fill": true, "fillColor": "#FFD55A", "fillOpacity": 0.9, "fillRule": "evenodd", "lineCap": "round", "lineJoin": "round", "opacity": 1.0, "radius": 9, "stroke": true, "weight": 2}
            ).addTo(marker_cluster_38407f48bfb0ef1004c5827501774c97);
        
    
        var popup_4e2d86fad98e5fba322695db4b0e3dca = L.popup({
  "maxWidth": 320,
});

        
            
                var html_32b6f16ec39a8a6a520cb2d0d43ba4c2 = $(`<div id="html_32b6f16ec39a8a6a520cb2d0d43ba4c2" style="width: 100.0%; height: 100.0%;">     <div style="width:280px;background:#1b1e22;color:#f4f2ee;border-radius:10px;box-shadow:0 4px 18px rgba(0,0,0,.35);overflow:hidden;border:1px solid rgba(190,170,141,.35);">              <div style="padding:12px 12px 8px 12px;">         <div style="font-weight:700;font-size:15px;margin-bottom:2px;">Cameroon</div>         <div style="opacity:.7;font-size:12px;margin-bottom:8px;">Kousseri, Cameroon</div>         <div style="display:flex;gap:14px;font-size:12px;margin-bottom:6px;">           <div>Impact: <b>Moderate</b></div>           <div>Total Qur'an: <b>2,000</b></div>         </div>         <a href="" target="_blank" style="display:inline-block;margin-top:4px;background:#BEAA8D;color:#111315;font-weight:700;padding:8px 10px;border-radius:8px;text-decoration:none;">VIEW DETAILS</a>       </div>     </div>     </div>`)[0];
                popup_4e2d86fad98e5fba322695db4b0e3dca.setContent(html_32b6f16ec39a8a6a520cb2d0d43ba4c2);
            
        

        circle_marker_5bf6a02356428ffed5fe63633f4e52ce.bindPopup(popup_4e2d86fad98e5fba322695db4b0e3dca)
        ;

        
    
    
            circle_marker_5bf6a02356428ffed5fe63633f4e52ce.bindTooltip(
                `<div>
                     Cameroon â€” 2000 Qur'an
                 </div>`,
                {
  "sticky": true,
}
            );
        
    
            var circle_marker_a028c19e85f067e9fd1f76564e7ce65b = L.circleMarker(
                [12.087083, 15.0148322],
                {"bubblingMouseEvents": true, "color": "#E3A821", "dashArray": null, "dashOffset": null, "fill": true, "fillColor": "#FFD55A", "fillOpacity": 0.9, "fillRule": "evenodd", "lineCap": "round", "lineJoin": "round", "opacity": 1.0, "radius": 9, "stroke": true, "weight": 2}
            ).addTo(marker_cluster_38407f48bfb0ef1004c5827501774c97);
        
    
        var popup_0df35e0eb2705067761fbfac73927fa6 = L.popup({
  "maxWidth": 320,
});

        
            
                var html_dbf6f1f630753192b4a4a5246670d543 = $(`<div id="html_dbf6f1f630753192b4a4a5246670d543" style="width: 100.0%; height: 100.0%;">     <div style="width:280px;background:#1b1e22;color:#f4f2ee;border-radius:10px;box-shadow:0 4px 18px rgba(0,0,0,.35);overflow:hidden;border:1px solid rgba(190,170,141,.35);">              <div style="padding:12px 12px 8px 12px;">         <div style="font-weight:700;font-size:15px;margin-bottom:2px;">Cameroon</div>         <div style="opacity:.7;font-size:12px;margin-bottom:8px;">Kousseri, Cameroon</div>         <div style="display:flex;gap:14px;font-size:12px;margin-bottom:6px;">           <div>Impact: <b>Moderate</b></div>           <div>Total Qur'an: <b>2,000</b></div>         </div>         <a href="" target="_blank" style="display:inline-block;margin-top:4px;background:#BEAA8D;color:#111315;font-weight:700;padding:8px 10px;border-radius:8px;text-decoration:none;">VIEW DETAILS</a>       </div>     </div>     </div>`)[0];
                popup_0df35e0eb2705067761fbfac73927fa6.setContent(html_dbf6f1f630753192b4a4a5246670d543);
            
        

        circle_marker_a028c19e85f067e9fd1f76564e7ce65b.bindPopup(popup_0df35e0eb2705067761fbfac73927fa6)
        ;

        
    
    
            circle_marker_a028c19e85f067e9fd1f76564e7ce65b.bindTooltip(
                `<div>
                     Cameroon â€” 2000 Qur'an
                 </div>`,
                {
  "sticky": true,
}
            );
        
    
            var circle_marker_fc7f1dfb9d922650c08739240f2b3599 = L.circleMarker(
                [8.5263486, 39.2583293],
                {"bubblingMouseEvents": true, "color": "#E3A821", "dashArray": null, "dashOffset": null, "fill": true, "fillColor": "#FFD55A", "fillOpacity": 0.9, "fillRule": "evenodd", "lineCap": "round", "lineJoin": "round", "opacity": 1.0, "radius": 9, "stroke": true, "weight": 2}
            ).addTo(marker_cluster_38407f48bfb0ef1004c5827501774c97);
        
    
        var popup_b6e1d500d8827c861967fb3e02538ea4 = L.popup({
  "maxWidth": 320,
});

        
            
                var html_a7c58e681e75c15ff513b297d5e8dea1 = $(`<div id="html_a7c58e681e75c15ff513b297d5e8dea1" style="width: 100.0%; height: 100.0%;">     <div style="width:280px;background:#1b1e22;color:#f4f2ee;border-radius:10px;box-shadow:0 4px 18px rgba(0,0,0,.35);overflow:hidden;border:1px solid rgba(190,170,141,.35);">              <div style="padding:12px 12px 8px 12px;">         <div style="font-weight:700;font-size:15px;margin-bottom:2px;">Ethiopia</div>         <div style="opacity:.7;font-size:12px;margin-bottom:8px;">Adama, Ethiopia</div>         <div style="display:flex;gap:14px;font-size:12px;margin-bottom:6px;">           <div>Impact: <b>Moderate</b></div>           <div>Total Qur'an: <b>1,000</b></div>         </div>         <a href="" target="_blank" style="display:inline-block;margin-top:4px;background:#BEAA8D;color:#111315;font-weight:700;padding:8px 10px;border-radius:8px;text-decoration:none;">VIEW DETAILS</a>       </div>     </div>     </div>`)[0];
                popup_b6e1d500d8827c861967fb3e02538ea4.setContent(html_a7c58e681e75c15ff513b297d5e8dea1);
            
        

        circle_marker_fc7f1dfb9d922650c08739240f2b3599.bindPopup(popup_b6e1d500d8827c861967fb3e02538ea4)
        ;

        
    
    
            circle_marker_fc7f1dfb9d922650c08739240f2b3599.bindTooltip(
                `<div>
                     Ethiopia â€” 1000 Qur'an
                 </div>`,
                {
  "sticky": true,
}
            );
        
    
            var circle_marker_9cda5324a063713360df24109e15078f = L.circleMarker(
                [8.5263486, 39.2583293],
                {"bubblingMouseEvents": true, "color": "#E3A821", "dashArray": null, "dashOffset": null, "fill": true, "fillColor": "#FFD55A", "fillOpacity": 0.9, "fillRule": "evenodd", "lineCap": "round", "lineJoin": "round", "opacity": 1.0, "radius": 9, "stroke": true, "weight": 2}
            ).addTo(marker_cluster_38407f48bfb0ef1004c5827501774c97);
        
    
        var popup_7259c59eaf648ce1ca599a34b5172df9 = L.popup({
  "maxWidth": 320,
});

        
            
                var html_6000451ca66697dcb1a4b0655c16f490 = $(`<div id="html_6000451ca66697dcb1a4b0655c16f490" style="width: 100.0%; height: 100.0%;">     <div style="width:280px;background:#1b1e22;color:#f4f2ee;border-radius:10px;box-shadow:0 4px 18px rgba(0,0,0,.35);overflow:hidden;border:1px solid rgba(190,170,141,.35);">              <div style="padding:12px 12px 8px 12px;">         <div style="font-weight:700;font-size:15px;margin-bottom:2px;">Ethiopia</div>         <div style="opacity:.7;font-size:12px;margin-bottom:8px;">Adama, Ethiopia</div>         <div style="display:flex;gap:14px;font-size:12px;margin-bottom:6px;">           <div>Impact: <b>Moderate</b></div>           <div>Total Qur'an: <b>1,000</b></div>         </div>         <a href="" target="_blank" style="display:inline-block;margin-top:4px;background:#BEAA8D;color:#111315;font-weight:700;padding:8px 10px;border-radius:8px;text-decoration:none;">VIEW DETAILS</a>       </div>     </div>     </div>`)[0];
                popup_7259c59eaf648ce1ca599a34b5172df9.setContent(html_6000451ca66697dcb1a4b0655c16f490);
            
        

        circle_marker_9cda5324a063713360df24109e15078f.bindPopup(popup_7259c59eaf648ce1ca599a34b5172df9)
        ;

        
    
    
            circle_marker_9cda5324a063713360df24109e15078f.bindTooltip(
                `<div>
                     Ethiopia â€” 1000 Qur'an
                 </div>`,
                {
  "sticky": true,
}
            );
        
    
            var circle_marker_dab191de075430655aa0e73c84f9487a = L.circleMarker(
                [-6.1629685, 39.1865491],
                {"bubblingMouseEvents": true, "color": "#E3A821", "dashArray": null, "dashOffset": null, "fill": true, "fillColor": "#FFD55A", "fillOpacity": 0.9, "fillRule": "evenodd", "lineCap": "round", "lineJoin": "round", "opacity": 1.0, "radius": 9, "stroke": true, "weight": 2}
            ).addTo(marker_cluster_38407f48bfb0ef1004c5827501774c97);
        
    
        var popup_8e1c713a58bc9060dd891e7588d982c7 = L.popup({
  "maxWidth": 320,
});

        
            
                var html_866aaa4f47ba56b2db062f4219d3bb77 = $(`<div id="html_866aaa4f47ba56b2db062f4219d3bb77" style="width: 100.0%; height: 100.0%;">     <div style="width:280px;background:#1b1e22;color:#f4f2ee;border-radius:10px;box-shadow:0 4px 18px rgba(0,0,0,.35);overflow:hidden;border:1px solid rgba(190,170,141,.35);">              <div style="padding:12px 12px 8px 12px;">         <div style="font-weight:700;font-size:15px;margin-bottom:2px;">Tanzania</div>         <div style="opacity:.7;font-size:12px;margin-bottom:8px;">Shangani, Zanzibar, Tanzania</div>         <div style="display:flex;gap:14px;font-size:12px;margin-bottom:6px;">           <div>Impact: <b>High Impact</b></div>           <div>Total Qur'an: <b>8,680</b></div>         </div>         <a href="" target="_blank" style="display:inline-block;margin-top:4px;background:#BEAA8D;color:#111315;font-weight:700;padding:8px 10px;border-radius:8px;text-decoration:none;">VIEW DETAILS</a>       </div>     </div>     </div>`)[0];
                popup_8e1c713a58bc9060dd891e7588d982c7.setContent(html_866aaa4f47ba56b2db062f4219d3bb77);
            
        

        circle_marker_dab191de075430655aa0e73c84f9487a.bindPopup(popup_8e1c713a58bc9060dd891e7588d982c7)
        ;

        
    
    
            circle_marker_dab191de075430655aa0e73c84f9487a.bindTooltip(
                `<div>
                     Tanzania â€” 8680 Qur'an
                 </div>`,
                {
  "sticky": true,
}
            );
        
    
            var circle_marker_756d81121f493134b3c860a87ace07ca = L.circleMarker(
                [-6.1629685, 39.1865491],
                {"bubblingMouseEvents": true, "color": "#E3A821", "dashArray": null, "dashOffset": null, "fill": true, "fillColor": "#FFD55A", "fillOpacity": 0.9, "fillRule": "evenodd", "lineCap": "round", "lineJoin": "round", "opacity": 1.0, "radius": 9, "stroke": true, "weight": 2}
            ).addTo(marker_cluster_38407f48bfb0ef1004c5827501774c97);
        
    
        var popup_de57d80e6a4a4e2606bf5922e73d8b85 = L.popup({
  "maxWidth": 320,
});

        
            
                var html_54f21d941051cd0c7df19141b95ac702 = $(`<div id="html_54f21d941051cd0c7df19141b95ac702" style="width: 100.0%; height: 100.0%;">     <div style="width:280px;background:#1b1e22;color:#f4f2ee;border-radius:10px;box-shadow:0 4px 18px rgba(0,0,0,.35);overflow:hidden;border:1px solid rgba(190,170,141,.35);">              <div style="padding:12px 12px 8px 12px;">         <div style="font-weight:700;font-size:15px;margin-bottom:2px;">Tanzania</div>         <div style="opacity:.7;font-size:12px;margin-bottom:8px;">Shangani, Zanzibar, Tanzania</div>         <div style="display:flex;gap:14px;font-size:12px;margin-bottom:6px;">           <div>Impact: <b>High Impact</b></div>           <div>Total Qur'an: <b>8,680</b></div>         </div>         <a href="" target="_blank" style="display:inline-block;margin-top:4px;background:#BEAA8D;color:#111315;font-weight:700;padding:8px 10px;border-radius:8px;text-decoration:none;">VIEW DETAILS</a>       </div>     </div>     </div>`)[0];
                popup_de57d80e6a4a4e2606bf5922e73d8b85.setContent(html_54f21d941051cd0c7df19141b95ac702);
            
        

        circle_marker_756d81121f493134b3c860a87ace07ca.bindPopup(popup_de57d80e6a4a4e2606bf5922e73d8b85)
        ;

        
    
    
            circle_marker_756d81121f493134b3c860a87ace07ca.bindTooltip(
                `<div>
                     Tanzania â€” 8680 Qur'an
                 </div>`,
                {
  "sticky": true,
}
            );
        
    
            var circle_marker_520ab1e8e071081942385e83dcbdf3d2 = L.circleMarker(
                [-6.9275886, 39.1335549],
                {"bubblingMouseEvents": true, "color": "#E3A821", "dashArray": null, "dashOffset": null, "fill": true, "fillColor": "#FFD55A", "fillOpacity": 0.9, "fillRule": "evenodd", "lineCap": "round", "lineJoin": "round", "opacity": 1.0, "radius": 9, "stroke": true, "weight": 2}
            ).addTo(marker_cluster_38407f48bfb0ef1004c5827501774c97);
        
    
        var popup_166eb0c7e507fd4b08a0fdd01c9439ff = L.popup({
  "maxWidth": 320,
});

        
            
                var html_beaab25c37f3ed84169a5ffbd106a340 = $(`<div id="html_beaab25c37f3ed84169a5ffbd106a340" style="width: 100.0%; height: 100.0%;">     <div style="width:280px;background:#1b1e22;color:#f4f2ee;border-radius:10px;box-shadow:0 4px 18px rgba(0,0,0,.35);overflow:hidden;border:1px solid rgba(190,170,141,.35);">              <div style="padding:12px 12px 8px 12px;">         <div style="font-weight:700;font-size:15px;margin-bottom:2px;">Tanzania</div>         <div style="opacity:.7;font-size:12px;margin-bottom:8px;">Ilala, Tanzania</div>         <div style="display:flex;gap:14px;font-size:12px;margin-bottom:6px;">           <div>Impact: <b>Moderate</b></div>           <div>Total Qur'an: <b>1,650</b></div>         </div>         <a href="" target="_blank" style="display:inline-block;margin-top:4px;background:#BEAA8D;color:#111315;font-weight:700;padding:8px 10px;border-radius:8px;text-decoration:none;">VIEW DETAILS</a>       </div>     </div>     </div>`)[0];
                popup_166eb0c7e507fd4b08a0fdd01c9439ff.setContent(html_beaab25c37f3ed84169a5ffbd106a340);
            
        

        circle_marker_520ab1e8e071081942385e83dcbdf3d2.bindPopup(popup_166eb0c7e507fd4b08a0fdd01c9439ff)
        ;

        
    
    
            circle_marker_520ab1e8e071081942385e83dcbdf3d2.bindTooltip(
                `<div>
                     Tanzania â€” 1650 Qur'an
                 </div>`,
                {
  "sticky": true,
}
            );
        
    
            var circle_marker_d4150277c52629623c894718ee0b7be7 = L.circleMarker(
                [-6.9275886, 39.1335549],
                {"bubblingMouseEvents": true, "color": "#E3A821", "dashArray": null, "dashOffset": null, "fill": true, "fillColor": "#FFD55A", "fillOpacity": 0.9, "fillRule": "evenodd", "lineCap": "round", "lineJoin": "round", "opacity": 1.0, "radius": 9, "stroke": true, "weight": 2}
            ).addTo(marker_cluster_38407f48bfb0ef1004c5827501774c97);
        
    
        var popup_e7732016b77a54e49d0238fd5a972c89 = L.popup({
  "maxWidth": 320,
});

        
            
                var html_ab71835c4cc87a3c67d6878e4dc3654a = $(`<div id="html_ab71835c4cc87a3c67d6878e4dc3654a" style="width: 100.0%; height: 100.0%;">     <div style="width:280px;background:#1b1e22;color:#f4f2ee;border-radius:10px;box-shadow:0 4px 18px rgba(0,0,0,.35);overflow:hidden;border:1px solid rgba(190,170,141,.35);">              <div style="padding:12px 12px 8px 12px;">         <div style="font-weight:700;font-size:15px;margin-bottom:2px;">Tanzania</div>         <div style="opacity:.7;font-size:12px;margin-bottom:8px;">Ilala, Tanzania</div>         <div style="display:flex;gap:14px;font-size:12px;margin-bottom:6px;">           <div>Impact: <b>Moderate</b></div>           <div>Total Qur'an: <b>1,650</b></div>         </div>         <a href="" target="_blank" style="display:inline-block;margin-top:4px;background:#BEAA8D;color:#111315;font-weight:700;padding:8px 10px;border-radius:8px;text-decoration:none;">VIEW DETAILS</a>       </div>     </div>     </div>`)[0];
                popup_e7732016b77a54e49d0238fd5a972c89.setContent(html_ab71835c4cc87a3c67d6878e4dc3654a);
            
        

        circle_marker_d4150277c52629623c894718ee0b7be7.bindPopup(popup_e7732016b77a54e49d0238fd5a972c89)
        ;

        
    
    
            circle_marker_d4150277c52629623c894718ee0b7be7.bindTooltip(
                `<div>
                     Tanzania â€” 1650 Qur'an
                 </div>`,
                {
  "sticky": true,
}
            );
        
    
            var circle_marker_91aa75c06086d91158f9923b007e749d = L.circleMarker(
                [-6.135729500000001, 39.3621196],
                {"bubblingMouseEvents": true, "color": "#E3A821", "dashArray": null, "dashOffset": null, "fill": true, "fillColor": "#FFD55A", "fillOpacity": 0.9, "fillRule": "evenodd", "lineCap": "round", "lineJoin": "round", "opacity": 1.0, "radius": 9, "stroke": true, "weight": 2}
            ).addTo(marker_cluster_38407f48bfb0ef1004c5827501774c97);
        
    
        var popup_261d32f1bdb68b431cdfb86567943b8e = L.popup({
  "maxWidth": 320,
});

        
            
                var html_1e6d7935d5be3f62224ad87e76aba756 = $(`<div id="html_1e6d7935d5be3f62224ad87e76aba756" style="width: 100.0%; height: 100.0%;">     <div style="width:280px;background:#1b1e22;color:#f4f2ee;border-radius:10px;box-shadow:0 4px 18px rgba(0,0,0,.35);overflow:hidden;border:1px solid rgba(190,170,141,.35);">              <div style="padding:12px 12px 8px 12px;">         <div style="font-weight:700;font-size:15px;margin-bottom:2px;">Tanzania</div>         <div style="opacity:.7;font-size:12px;margin-bottom:8px;">Unguja, Tanzania</div>         <div style="display:flex;gap:14px;font-size:12px;margin-bottom:6px;">           <div>Impact: <b>Moderate</b></div>           <div>Total Qur'an: <b>3,000</b></div>         </div>         <a href="" target="_blank" style="display:inline-block;margin-top:4px;background:#BEAA8D;color:#111315;font-weight:700;padding:8px 10px;border-radius:8px;text-decoration:none;">VIEW DETAILS</a>       </div>     </div>     </div>`)[0];
                popup_261d32f1bdb68b431cdfb86567943b8e.setContent(html_1e6d7935d5be3f62224ad87e76aba756);
            
        

        circle_marker_91aa75c06086d91158f9923b007e749d.bindPopup(popup_261d32f1bdb68b431cdfb86567943b8e)
        ;

        
    
    
            circle_marker_91aa75c06086d91158f9923b007e749d.bindTooltip(
                `<div>
                     Tanzania â€” 3000 Qur'an
                 </div>`,
                {
  "sticky": true,
}
            );
        
    
            var circle_marker_2a91accd8b94233ec5d8c1dd94e4e1f2 = L.circleMarker(
                [-6.135729500000001, 39.3621196],
                {"bubblingMouseEvents": true, "color": "#E3A821", "dashArray": null, "dashOffset": null, "fill": true, "fillColor": "#FFD55A", "fillOpacity": 0.9, "fillRule": "evenodd", "lineCap": "round", "lineJoin": "round", "opacity": 1.0, "radius": 9, "stroke": true, "weight": 2}
            ).addTo(marker_cluster_38407f48bfb0ef1004c5827501774c97);
        
    
        var popup_6db367a04b423447dd97ac246439f6ca = L.popup({
  "maxWidth": 320,
});

        
            
                var html_2a1209d21c90e53c3a4738de215cad02 = $(`<div id="html_2a1209d21c90e53c3a4738de215cad02" style="width: 100.0%; height: 100.0%;">     <div style="width:280px;background:#1b1e22;color:#f4f2ee;border-radius:10px;box-shadow:0 4px 18px rgba(0,0,0,.35);overflow:hidden;border:1px solid rgba(190,170,141,.35);">              <div style="padding:12px 12px 8px 12px;">         <div style="font-weight:700;font-size:15px;margin-bottom:2px;">Tanzania</div>         <div style="opacity:.7;font-size:12px;margin-bottom:8px;">Unguja, Tanzania</div>         <div style="display:flex;gap:14px;font-size:12px;margin-bottom:6px;">           <div>Impact: <b>Moderate</b></div>           <div>Total Qur'an: <b>3,000</b></div>         </div>         <a href="" target="_blank" style="display:inline-block;margin-top:4px;background:#BEAA8D;color:#111315;font-weight:700;padding:8px 10px;border-radius:8px;text-decoration:none;">VIEW DETAILS</a>       </div>     </div>     </div>`)[0];
                popup_6db367a04b423447dd97ac246439f6ca.setContent(html_2a1209d21c90e53c3a4738de215cad02);
            
        

        circle_marker_2a91accd8b94233ec5d8c1dd94e4e1f2.bindPopup(popup_6db367a04b423447dd97ac246439f6ca)
        ;

        
    
    
            circle_marker_2a91accd8b94233ec5d8c1dd94e4e1f2.bindTooltip(
                `<div>
                     Tanzania â€” 3000 Qur'an
                 </div>`,
                {
  "sticky": true,
}
            );
        
    
            var circle_marker_7850c4af0c0af07a931a2d39e129485b = L.circleMarker(
                [43.8598677, 18.4128265],
                {"bubblingMouseEvents": true, "color": "#E3A821", "dashArray": null, "dashOffset": null, "fill": true, "fillColor": "#FFD55A", "fillOpacity": 0.9, "fillRule": "evenodd", "lineCap": "round", "lineJoin": "round", "opacity": 1.0, "radius": 9, "stroke": true, "weight": 2}
            ).addTo(marker_cluster_38407f48bfb0ef1004c5827501774c97);
        
    
        var popup_6ca375830135f93bb862507b8844f85e = L.popup({
  "maxWidth": 320,
});

        
            
                var html_6e58dc79ec0e6ba9b88ab209c080ec1f = $(`<div id="html_6e58dc79ec0e6ba9b88ab209c080ec1f" style="width: 100.0%; height: 100.0%;">     <div style="width:280px;background:#1b1e22;color:#f4f2ee;border-radius:10px;box-shadow:0 4px 18px rgba(0,0,0,.35);overflow:hidden;border:1px solid rgba(190,170,141,.35);">              <div style="padding:12px 12px 8px 12px;">         <div style="font-weight:700;font-size:15px;margin-bottom:2px;">Sarajevo, Bosnia</div>         <div style="opacity:.7;font-size:12px;margin-bottom:8px;">Jezero, 71000 Sarajevo, Bosnia and Herzegovina</div>         <div style="display:flex;gap:14px;font-size:12px;margin-bottom:6px;">           <div>Impact: <b>Moderate</b></div>           <div>Total Qur'an: <b>1,650</b></div>         </div>         <a href="" target="_blank" style="display:inline-block;margin-top:4px;background:#BEAA8D;color:#111315;font-weight:700;padding:8px 10px;border-radius:8px;text-decoration:none;">VIEW DETAILS</a>       </div>     </div>     </div>`)[0];
                popup_6ca375830135f93bb862507b8844f85e.setContent(html_6e58dc79ec0e6ba9b88ab209c080ec1f);
            
        

        circle_marker_7850c4af0c0af07a931a2d39e129485b.bindPopup(popup_6ca375830135f93bb862507b8844f85e)
        ;

        
    
    
            circle_marker_7850c4af0c0af07a931a2d39e129485b.bindTooltip(
                `<div>
                     Sarajevo, Bosnia â€” 1650 Qur'an
                 </div>`,
                {
  "sticky": true,
}
            );
        
    
            var circle_marker_c4acfd967ab629ae101b3c58d6b8c99c = L.circleMarker(
                [43.8598677, 18.4128265],
                {"bubblingMouseEvents": true, "color": "#E3A821", "dashArray": null, "dashOffset": null, "fill": true, "fillColor": "#FFD55A", "fillOpacity": 0.9, "fillRule": "evenodd", "lineCap": "round", "lineJoin": "round", "opacity": 1.0, "radius": 9, "stroke": true, "weight": 2}
            ).addTo(marker_cluster_38407f48bfb0ef1004c5827501774c97);
        
    
        var popup_b2cb230e629f7f2339aa4c267006ebe9 = L.popup({
  "maxWidth": 320,
});

        
            
                var html_284ca354f650d56ba1fa7284ff471e6f = $(`<div id="html_284ca354f650d56ba1fa7284ff471e6f" style="width: 100.0%; height: 100.0%;">     <div style="width:280px;background:#1b1e22;color:#f4f2ee;border-radius:10px;box-shadow:0 4px 18px rgba(0,0,0,.35);overflow:hidden;border:1px solid rgba(190,170,141,.35);">              <div style="padding:12px 12px 8px 12px;">         <div style="font-weight:700;font-size:15px;margin-bottom:2px;">Sarajevo, Bosnia</div>         <div style="opacity:.7;font-size:12px;margin-bottom:8px;">Jezero, 71000 Sarajevo, Bosnia and Herzegovina</div>         <div style="display:flex;gap:14px;font-size:12px;margin-bottom:6px;">           <div>Impact: <b>Moderate</b></div>           <div>Total Qur'an: <b>1,650</b></div>         </div>         <a href="" target="_blank" style="display:inline-block;margin-top:4px;background:#BEAA8D;color:#111315;font-weight:700;padding:8px 10px;border-radius:8px;text-decoration:none;">VIEW DETAILS</a>       </div>     </div>     </div>`)[0];
                popup_b2cb230e629f7f2339aa4c267006ebe9.setContent(html_284ca354f650d56ba1fa7284ff471e6f);
            
        

        circle_marker_c4acfd967ab629ae101b3c58d6b8c99c.bindPopup(popup_b2cb230e629f7f2339aa4c267006ebe9)
        ;

        
    
    
            circle_marker_c4acfd967ab629ae101b3c58d6b8c99c.bindTooltip(
                `<div>
                     Sarajevo, Bosnia â€” 1650 Qur'an
                 </div>`,
                {
  "sticky": true,
}
            );
        
    
            var circle_marker_af82bb7f7d536852ea758be6dd542a19 = L.circleMarker(
                [12.3714277, -1.5196603],
                {"bubblingMouseEvents": true, "color": "#E3A821", "dashArray": null, "dashOffset": null, "fill": true, "fillColor": "#FFD55A", "fillOpacity": 0.9, "fillRule": "evenodd", "lineCap": "round", "lineJoin": "round", "opacity": 1.0, "radius": 9, "stroke": true, "weight": 2}
            ).addTo(marker_cluster_38407f48bfb0ef1004c5827501774c97);
        
    
        var popup_79c243c6d6c71fa83dd7aedc0f3a2de8 = L.popup({
  "maxWidth": 320,
});


            
                var html_deafba578dbb52dabcf438233be8803d = $(`<div id="html_deafba578dbb52dabcf438233be8803d" style="width: 100.0%; height: 100.0%;">     <div style="width:280px;background:#1b1e22;color:#f4f2ee;border-radius:10px;box-shadow:0 4px 18px rgba(0,0,0,.35);overflow:hidden;border:1px solid rgba(190,170,141,.35);">              <div style="padding:12px 12px 8px 12px;">         <div style="font-weight:700;font-size:15px;margin-bottom:2px;">Ouagadougou, Burkina Faso</div>         <div style="opacity:.7;font-size:12px;margin-bottom:8px;">Ouagadougou, Burkina Faso</div>         <div style="display:flex;gap:14px;font-size:12px;margin-bottom:6px;">           <div>Impact: <b>Active</b></div>           <div>Total Qur'an: <b>8,000</b></div>         </div>         <a href="" target="_blank" style="display:inline-block;margin-top:4px;background:#BEAA8D;color:#111315;font-weight:700;padding:8px 10px;border-radius:8px;text-decoration:none;">VIEW DETAILS</a>       </div>     </div>     </div>`)[0];
                popup_79c243c6d6c71fa83dd7aedc0f3a2de8.setContent(html_deafba578dbb52dabcf438233be8803d);
            
        

        circle_marker_af82bb7f7d536852ea758be6dd542a19.bindPopup(popup_79c243c6d6c71fa83dd7aedc0f3a2de8)
        ;

        
    
    
            circle_marker_af82bb7f7d536852ea758be6dd542a19.bindTooltip(
                `<div>
                     Ouagadougou, Burkina Faso â€” 8,000 Qur'an
                 </div>`,
                {
  "sticky": true,
}
            );
        
    
            try{
              var targetGroup = feature_group_42780829d8b3ea0b2243a12a6e93e853;
              console.log('ATTACH_CLUSTER:', { targetGroupType: typeof targetGroup, constructor: targetGroup && targetGroup.constructor && targetGroup.constructor.name, hasAddLayer: targetGroup && typeof targetGroup.addLayer === 'function', markerClusterType: (marker_cluster_38407f48bfb0ef1004c5827501774c97 && marker_cluster_38407f48bfb0ef1004c5827501774c97.constructor && marker_cluster_38407f48bfb0ef1004c5827501774c97.constructor.name) });
              if(targetGroup && typeof targetGroup.addLayer === 'function'){
                targetGroup.addLayer(marker_cluster_38407f48bfb0ef1004c5827501774c97);
              } else if(window && window.map_650a101fa46c8081aa4ee9eed624a32a && typeof window.map_650a101fa46c8081aa4ee9eed624a32a.addLayer === 'function'){
                console.warn('ATTACH_CLUSTER: targetGroup missing addLayer, attaching to map instead');
                window.map_650a101fa46c8081aa4ee9eed624a32a.addLayer(marker_cluster_38407f48bfb0ef1004c5827501774c97);
              } else {
                console.warn('ATTACH_CLUSTER: falling back to addTo(targetGroup) which may fail');
                marker_cluster_38407f48bfb0ef1004c5827501774c97.addTo(feature_group_42780829d8b3ea0b2243a12a6e93e853);
              }
            }catch(e){
              console.warn('SAFE: failed to attach marker cluster to feature group', e);
              try{ marker_cluster_38407f48bfb0ef1004c5827501774c97.addTo(window.map_650a101fa46c8081aa4ee9eed624a32a); }catch(_){ console.error('FINAL fallback failed', _); }
            }
        
    
            var marker_5002f803cc2c3508d87c3fda6b937ea2 = L.marker(
                [12.3714277, -1.5196603],
                {
}
            ).addTo(map_650a101fa46c8081aa4ee9eed624a32a);
        
    
            var div_icon_2b82740ae3d719b67f3eb7915b778c74 = L.divIcon({
  "html": "\u003cdiv class=\"pulse-pin\" title=\"Launching 22 Dec 2025\"\u003e\u003c/div\u003e",
  "iconSize": [24, 24],
  "iconAnchor": [12, 12],
  "className": "empty",
});
            marker_5002f803cc2c3508d87c3fda6b937ea2.setIcon(div_icon_2b82740ae3d719b67f3eb7915b778c74);
        
    
        var popup_e451c61206b8f4b13ed179186b153b99 = L.popup({
  "maxWidth": 320,
});

        
            
                var html_acba9da6779c7dc94e98a9be0608d1d0 = $(`<div id="html_acba9da6779c7dc94e98a9be0608d1d0" style="width: 100.0%; height: 100.0%;">     <div style="width:280px;background:#1b1e22;color:#f4f2ee;border-radius:10px;box-shadow:0 4px 18px rgba(0,0,0,.35);overflow:hidden;border:1px solid rgba(190,170,141,.35);">              <div style="padding:12px 12px 8px 12px;">         <div style="font-weight:700;font-size:15px;margin-bottom:2px;">Ouagadougou, Burkina Faso</div>         <div style="opacity:.7;font-size:12px;margin-bottom:8px;">Ouagadougou, Burkina Faso</div>         <div style="display:flex;gap:14px;font-size:12px;margin-bottom:6px;">           <div>Impact: <b>Active</b></div>           <div>Total Qur'an: <b>8,000</b></div>         </div>         <a href="" target="_blank" style="display:inline-block;margin-top:4px;background:#BEAA8D;color:#111315;font-weight:700;padding:8px 10px;border-radius:8px;text-decoration:none;">VIEW DETAILS</a>       </div>     </div>     </div>`)[0];
                popup_e451c61206b8f4b13ed179186b153b99.setContent(html_acba9da6779c7dc94e98a9be0608d1d0);
            
        

        marker_5002f803cc2c3508d87c3fda6b937ea2.bindPopup(popup_e451c61206b8f4b13ed179186b153b99)
        ;

        
    
    
            marker_5002f803cc2c3508d87c3fda6b937ea2.bindTooltip(
                `<div>
                     Ouagadougou, Burkina Faso â€” 8,000 Qur'an
                 </div>`,
                {
  "sticky": true,
}
            );
        
</script>
<!-- Flight airplane + dashed animation removed -->
</html>